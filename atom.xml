<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog for Robert.LIU</title>
  
  <subtitle>刘骏的博客</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.robert-liu-designer.tk/"/>
  <updated>2020-05-10T10:12:03.974Z</updated>
  <id>https://www.robert-liu-designer.tk/</id>
  
  <author>
    <name>Robert.LIU</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>maven</title>
    <link href="https://www.robert-liu-designer.tk/2020/05/10/maven/"/>
    <id>https://www.robert-liu-designer.tk/2020/05/10/maven/</id>
    <published>2020-05-10T10:03:19.000Z</published>
    <updated>2020-05-10T10:12:03.974Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="maven-package-export-dependencies-to-target-folder">Maven Package export dependencies to target folder</span></h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mvn dependency:copy-dependencies -DoutputDirectory=target/lib</span><br></pre></td></tr></table></figure><h2><span id="export-dependencies-to-assem-jar">Export Dependencies to assem jar</span></h2><h3><span id="import-pom-plugins-dependency">Import POM plugins dependency</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">descriptorRef</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span><span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="execute">Execute</span></h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mvn clean assembly:assembly _DiskipTests</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*-jar-with-dependencies.jar</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2&gt;&lt;span id=&quot;maven-package-export-dependencies-to-target-folder&quot;&gt;Maven Package export dependencies to target folder&lt;/span&gt;&lt;/h2&gt;&lt;figure clas
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Tool" scheme="https://www.robert-liu-designer.tk/tags/Tool/"/>
    
      <category term="Maven" scheme="https://www.robert-liu-designer.tk/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>mysql</title>
    <link href="https://www.robert-liu-designer.tk/2020/05/05/mysql/"/>
    <id>https://www.robert-liu-designer.tk/2020/05/05/mysql/</id>
    <published>2020-05-05T07:42:05.000Z</published>
    <updated>2020-05-05T11:59:32.636Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="launch">Launch</span></h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">/etc/init.d/mysqld start</span><br><span class="line"><span class="comment">## service mysqld start</span></span><br><span class="line"><span class="comment"># Display help</span></span><br><span class="line">mysql --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><h3><span id="add-inddex">Add Inddex</span></h3><p>1.update table index(追加索引)</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> tableName <span class="keyword">ADD</span> <span class="keyword">INDEX</span> indexName(columnName)</span><br></pre></td></tr></table></figure><p>2.direct create index at building table(建表索引)</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(   </span><br><span class="line"><span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line"><span class="keyword">INDEX</span> [indexName] (username(<span class="keyword">length</span>))  </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>3.unique index(唯一索引)</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> indexName <span class="keyword">ON</span> mytable(username(<span class="keyword">length</span>))</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> index_name (column_list)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line"><span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line"><span class="keyword">UNIQUE</span> [indexName] (username(<span class="keyword">length</span>))  </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Display Index</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> table_name; \G</span><br></pre></td></tr></table></figure><h3><span id="data-import-and-export">data import and export</span></h3><h4><span id="import">Import</span></h4><p>1.Load At Login</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. sql file</span></span><br><span class="line">mysql -uroot -p123456 &lt; runoob.sql</span><br><span class="line"><span class="comment">#2. import data to mytble</span></span><br><span class="line">mysqlimport -u root -p --<span class="built_in">local</span> mytbl dump.txt</span><br></pre></td></tr></table></figure><p>2.Source File</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Use DATABASE</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">database</span>-tp</span><br><span class="line"><span class="comment">-- import sql file</span></span><br><span class="line"><span class="keyword">source</span> /usr/home/robert/xxx.sql</span><br></pre></td></tr></table></figure><p>3.Load Data To Table</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">LOCAL</span> <span class="keyword">INFILE</span> <span class="string">'dump.txt'</span> <span class="keyword">INTO</span> <span class="keyword">TABLE</span> mytable;</span><br></pre></td></tr></table></figure><h4><span id="export">Export</span></h4><p>1.SELECT * FROM tablename INTO OUTFILE ‘’;</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> test_table001</span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'/tmp/dump_test_table001.txt'</span>;</span><br></pre></td></tr></table></figure><p>2.CSV format</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> test_table002 <span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'/tmp/dump_test_table002.txt'</span></span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span> <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">'"'</span></span><br><span class="line"><span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\r\n'</span>;</span><br></pre></td></tr></table></figure><p>3.Common Format</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a,b,a+b <span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'/tmp/test_table003.text'</span></span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span> <span class="keyword">OPTIONALLY</span> <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">'"'</span></span><br><span class="line"><span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\n'</span></span><br><span class="line"><span class="keyword">FROM</span> test_table003;</span><br></pre></td></tr></table></figure><h3><span id="data-resume">data resume</span></h3><p>1.dump by mysqldump</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Export table meta</span></span><br><span class="line"><span class="comment">## Exclude create info to /tmp</span></span><br><span class="line">mysqldump -u root -p --no-create-info \</span><br><span class="line">            --tab=/tmp <span class="built_in">test</span> test_tbl</span><br><span class="line"><span class="comment"># Export Sql format</span></span><br><span class="line"><span class="comment">## basename tablename to filepath</span></span><br><span class="line">mysqldump -u root -p TESTDB test_tbl &gt; /tmp/dump.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Export Database All Data</span></span><br><span class="line">mysqldump -u root -p TESTDB &gt; /tmp/dump_database_TESTDB.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># Export All Database</span></span><br><span class="line">mysqldump -u root -p --all-databases &gt; databasea_dump.txt</span><br></pre></td></tr></table></figure><p>Template as FOLLOW</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- MySQL dump 8.23</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Host: localhost    Database: TESTDB</span></span><br><span class="line"><span class="comment">---------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- Server version       3.23.58</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Table structure for table `test_tbl`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_tbl (</span><br><span class="line">  runoob_id <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> auto_increment,</span><br><span class="line">  runoob_title <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  runoob_author <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  submission_date <span class="built_in">date</span> <span class="keyword">default</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>  (runoob_id),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> AUTHOR_INDEX (runoob_author)</span><br><span class="line">) <span class="keyword">TYPE</span>=MyISAM;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Dumping data for table `runoob_tbl`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_tbl </span><br><span class="line">       <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">'Learn PHP'</span>,<span class="string">'John Poul'</span>,<span class="string">'2020-04-24'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_tbl </span><br><span class="line">       <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">'Learn MySQL'</span>,<span class="string">'Abdul S'</span>,<span class="string">'2020-03-24'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_tbl </span><br><span class="line">       <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="string">'JAVA Tutorial'</span>,<span class="string">'Sanjay'</span>,<span class="string">'2020-03-06'</span>);</span><br></pre></td></tr></table></figure><p>2.Dump To Remote Database</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mysqldump -u root -p database_name \</span><br><span class="line">       | mysql -h other-host.com database_name</span><br></pre></td></tr></table></figure><p>4.Download Remote Database Data</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mysqldump -h hostname -uroot -p --no-craete-info database_name &gt;</span><br></pre></td></tr></table></figure><h3><span id="mysql-cluster">Mysql Cluster</span></h3><h4><span id="multi-instance">Multi Instance</span></h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkdir -p /data/mysql/mysql_3306/data</span><br><span class="line">mkdir -p /data/mysql/mysql_3306/<span class="built_in">log</span></span><br><span class="line">mkdir -p /data/mysql/mysql_3306/tmp</span><br></pre></td></tr></table></figure><p>add instance to my.conf</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[client]</span><br><span class="line">port&#x3D;3306</span><br><span class="line">socket&#x3D;&#x2F;tmp&#x2F;mysql.sock</span><br><span class="line">[mysqld_multi]</span><br><span class="line">mysqld &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqld_safe</span><br><span class="line">mysqladmin &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqladmin</span><br><span class="line">log &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysqld_multi.log</span><br><span class="line">[mysqld]</span><br><span class="line">basedir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">sql_mode&#x3D;NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3306数据库</span><br><span class="line">[mysqld3306]</span><br><span class="line">mysqld&#x3D;mysqld</span><br><span class="line">mysqladmin&#x3D;mysqladmin</span><br><span class="line"># Data Dir</span><br><span class="line">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;mysql_3306&#x2F;data</span><br><span class="line"># Listen Port</span><br><span class="line">port&#x3D;3306</span><br><span class="line"># ServerID</span><br><span class="line">server_id&#x3D;3306</span><br><span class="line"># Socket Id</span><br><span class="line">socket&#x3D;&#x2F;tmp&#x2F;mysql_3306.sock</span><br><span class="line">log-output&#x3D;file</span><br><span class="line">slow_query_log &#x3D; 1</span><br><span class="line">long_query_time &#x3D; 1</span><br><span class="line"># Log Path</span><br><span class="line">slow_query_log_file &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3306&#x2F;log&#x2F;slow.log</span><br><span class="line"># Error Log Path</span><br><span class="line">log-error &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3306&#x2F;log&#x2F;error.log</span><br><span class="line">binlog_format &#x3D; mixed</span><br><span class="line">log-bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3306&#x2F;log&#x2F;mysql3306_bini</span><br><span class="line"></span><br><span class="line">#3307数据库</span><br><span class="line">[mysqld3307]</span><br><span class="line">mysqld&#x3D;mysqld</span><br><span class="line">mysqladmin&#x3D;mysqladmin</span><br><span class="line"># Data Dir</span><br><span class="line">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;mysql_3306&#x2F;data</span><br><span class="line"># Listen Port</span><br><span class="line">port&#x3D;3307</span><br><span class="line"># ServerID</span><br><span class="line">server_id&#x3D;3306</span><br><span class="line"># Socket Id</span><br><span class="line">socket&#x3D;&#x2F;tmp&#x2F;mysql_3307.sock</span><br><span class="line">log-output&#x3D;file</span><br><span class="line">slow_query_log &#x3D; 1</span><br><span class="line">long_query_time &#x3D; 1</span><br><span class="line"># Log Path</span><br><span class="line">slow_query_log_file &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3307&#x2F;log&#x2F;slow.log</span><br><span class="line"># Error Log Path</span><br><span class="line">log-error &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3307&#x2F;log&#x2F;error.log</span><br><span class="line">binlog_format &#x3D; mixed</span><br><span class="line">log-bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3307&#x2F;log&#x2F;mysql3307_bini</span><br><span class="line"></span><br><span class="line">#3308数据库</span><br><span class="line">[mysqld3308]</span><br><span class="line">mysqld&#x3D;mysqld</span><br><span class="line">mysqladmin&#x3D;mysqladmin</span><br><span class="line"># Data Dir</span><br><span class="line">datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;mysql_3308&#x2F;data</span><br><span class="line"># Listen Port</span><br><span class="line">port&#x3D;3308</span><br><span class="line"># ServerID</span><br><span class="line">server_id&#x3D;3308</span><br><span class="line"># Socket Id</span><br><span class="line">socket&#x3D;&#x2F;tmp&#x2F;mysql_3308.sock</span><br><span class="line">log-output&#x3D;file</span><br><span class="line">slow_query_log &#x3D; 1</span><br><span class="line">long_query_time &#x3D; 1</span><br><span class="line"># Log Path</span><br><span class="line">slow_query_log_file &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3308&#x2F;log&#x2F;slow.log</span><br><span class="line"># Error Log Path</span><br><span class="line">log-error &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3308&#x2F;log&#x2F;error.log</span><br><span class="line">binlog_format &#x3D; mixed</span><br><span class="line">log-bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_3308&#x2F;log&#x2F;mysql3306_bini</span><br></pre></td></tr></table></figure><p>Initial database</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/mysql/scripts/mysql_install_db --basedir=/usr/<span class="built_in">local</span>/mysql/ --datadir=/data/mysql/mysql_3306/data --defaults-file=/etc/my.cnf</span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/scripts/mysql_install_db --basedir=/usr/<span class="built_in">local</span>/mysql/ --datadir=/data/mysql/mysql_3307/data --defaults-file=/etc/my.cnf</span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/scripts/mysql_install_db --basedir=/usr/<span class="built_in">local</span>/mysql/ --datadir=/data/mysql/mysql_3308/data --defaults-file=/etc/my.cnf</span><br></pre></td></tr></table></figure><p>Start Multi Instance</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># launch (If some one,just insert it's id)</span></span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/bin/mysqld_multi start</span><br><span class="line"><span class="comment"># Obtain Report</span></span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/bin/mysqld_multi report </span><br><span class="line"><span class="comment"># Check Process</span></span><br><span class="line">ps -aux | grep mysql</span><br></pre></td></tr></table></figure><h4><span id="master-slavedepende-on-binout">Master-Slave(depende on BinOut)</span></h4><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/mysql_master-slave.png">Clone All Data to master_db.sql<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump -uroot -pmysql <span class="comment">--all-databases --lock-all-tables &gt; ~/master_db.sql</span></span><br></pre></td></tr></table></figure>1.add Slave User To Maste Server<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'slave_server_test'</span>@<span class="string">'%'</span><span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'pwd'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'slave_server_test'</span>@<span class="string">'%'</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="string">'slave_server_test'</span>@<span class="string">'localhost'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'pwd'</span>;</span><br><span class="line"><span class="keyword">FLUSH</span> <span class="keyword">PRIVILEGES</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Show Users</span></span><br><span class="line"><span class="keyword">select</span> host,<span class="keyword">user</span> <span class="keyword">from</span> mysql.user;</span><br></pre></td></tr></table></figure>2.modifie setting filevi /etc/my.conf190database<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[msqld]</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id = 190</span><br></pre></td></tr></table></figure>191database<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id=191</span><br></pre></td></tr></table></figure>192database<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id=192</span><br></pre></td></tr></table></figure>3.bind masterin 190 Server(Obtain Bin File Name)<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">MASTER</span> <span class="keyword">STATUS</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+-----------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File            | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+-----------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| mysql-bin.000004|       596|              |                  |                   |</span><br><span class="line">+-----------------+----------+--------------+------------------+-------------------+</span><br></pre></td></tr></table></figure><p>In 191&amp;192 Server</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">change</span> <span class="keyword">master</span> <span class="keyword">to</span> master_host=<span class="string">'172.8.10.190'</span>,master_user=<span class="string">'slave_server_test'</span>,master_password=<span class="string">'pwd'</span>,master_log_file=<span class="string">'mysql-bin.000004'</span>,master_log_pos=<span class="number">596</span>;</span><br></pre></td></tr></table></figure><p>4.restart mysql</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;launch&quot;&gt;Launch&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/mysqld 
      
    
    </summary>
    
    
    
      <category term="Tools" scheme="https://www.robert-liu-designer.tk/tags/Tools/"/>
    
      <category term="Database" scheme="https://www.robert-liu-designer.tk/tags/Database/"/>
    
      <category term="Mysql" scheme="https://www.robert-liu-designer.tk/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>ssh-framework</title>
    <link href="https://www.robert-liu-designer.tk/2020/05/05/ssh-framework/"/>
    <id>https://www.robert-liu-designer.tk/2020/05/05/ssh-framework/</id>
    <published>2020-05-05T06:30:28.000Z</published>
    <updated>2020-05-05T12:03:03.426Z</updated>
    
    <content type="html"><![CDATA[<p>Project Path:<a href="https://github.com/CN-Robert-LIU/SSM_TP" target="_blank" rel="noopener">/CN-Robert-LIU/SSM_TP</a></p><table><thead><tr><th align="center">包名</th><th align="center">名称</th></tr></thead><tbody><tr><td align="center">dao</td><td align="center">数据访问层（接口）</td></tr><tr><td align="center">entity</td><td align="center">实体类</td></tr><tr><td align="center">dto</td><td align="center">数据传输层</td></tr><tr><td align="center">service</td><td align="center">业务逻辑（接口）</td></tr><tr><td align="center">serviceImpl</td><td align="center">业务逻辑（实现）</td></tr><tr><td align="center">web</td><td align="center">控制器</td></tr></tbody></table><h3><span id="pom-dependencies">POM dependencies</span></h3><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.robert-liu.ssm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- WAR/JAR --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--0.0.1-SNAPSHOT--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>XXX Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;url&gt;http://github.com/liyifeng1994/ssm&lt;/url&gt;</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 单元测试 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 1.日志 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 实现slf4j接口并整合 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 2.数据库 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.37<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- DAO: MyBatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 3.Servlet web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 4.Spring --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1)Spring核心 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2)Spring DAO层 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 3)Spring web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 4)Spring test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- redis客户端:Jedis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.dyuproject.protostuff<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>protostuff-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.dyuproject.protostuff<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>protostuff-runtime<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Map工具类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;finalName&gt;ssm&lt;/finalName&gt;</span></span><br><span class="line"><span class="comment">                                --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="jdbc-propertiesdatabase-info">JDBC properties(Database Info)</span></h3><p>jdbc.properties</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3307/ssm_temp_00?useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string"></span></span><br></pre></td></tr></table></figure><h3><span id="log-definelog-format">Log Define(log format)</span></h3><p>logback.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"STDOUT"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- encoders are by default assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"debug"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"STDOUT"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="mybatis-config">Mybatis Config</span></h3><p>mybaties-config.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置全局属性 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 使用jdbc的getGeneratedKeys获取数据库自增主键值 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"useGeneratedKeys"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 使用列别名替换列名 默认:true --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"useColumnLabel"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 开启驼峰命名转换:Table&#123;create_time&#125; -&gt; Entity&#123;createTime&#125; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><strong><em>SPRING</em></strong></strong></p><h3><span id="spring-web">Spring-WEB</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置SpringMVC --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.开启SpringMVC注解模式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 简化配置： </span></span><br><span class="line"><span class="comment">(1)自动注册DefaultAnootationHandlerMapping,AnotationMethodHandlerAdapter </span></span><br><span class="line"><span class="comment">(2)提供一些列：数据绑定，数字和日期的format @NumberFormat, @DateTimeFormat, xml,json默认读写支持 </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 2.静态资源默认servlet配置</span></span><br><span class="line"><span class="comment">(1)加入对静态资源的处理：js,gif,png</span></span><br><span class="line"><span class="comment">(2)允许使用"/"做整体映射</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">     </span><br><span class="line">     <span class="comment">&lt;!-- 3.配置jsp 显示ViewResolver --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">     <span class="comment">&lt;!-- 4.扫描web相关的bean --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.robert-liu.ssm.web"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="spring-service">Spring-Service</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 扫描service包下所有使用注解的类型 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.robert-liu.ssm.service"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置事务管理器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入数据库连接池 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置基于注解的声明式事务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="spring-dao">Spring-DAO</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置整合mybatis过程 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.配置数据库相关参数properties的属性：$&#123;url&#125; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 2.数据库连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置连接池属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- c3p0连接池的私有属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span> <span class="attr">value</span>=<span class="string">"30"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span> <span class="attr">value</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 关闭连接后不自动commit --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"autoCommitOnClose"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 获取连接超时时间 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"checkoutTimeout"</span> <span class="attr">value</span>=<span class="string">"10000"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 当获取连接失败重试次数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireRetryAttempts"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.配置SqlSessionFactory对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入数据库连接池 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置MyBaties全局配置文件:mybatis-config.xml --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描entity包 使用别名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.soecode.lyf.entity"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描sql配置文件:mapper需要的xml文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mapper/*.xml"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 4.配置扫描Dao接口包，动态实现Dao接口，注入到spring容器中 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给出需要扫描Dao接口包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.robert-liu.ssm.dao"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><strong><em>Mapper</em></strong></strong></p><h3><span id="mapperdaoxml">mapperDao.xml</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">    <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.soecode.lyf.dao.AppointmentDao"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertAppointment"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ignore 主键冲突，报错 --&gt;</span></span><br><span class="line">        INSERT ignore INTO appointment (book_id, student_id)</span><br><span class="line">        VALUES (#&#123;bookId&#125;, #&#123;studentId&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryByKeyWithBook"</span> <span class="attr">resultType</span>=<span class="string">"Appointment"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 如何告诉MyBatis把结果映射到Appointment同时映射book属性 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 可以自由控制SQL --&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            a.book_id,</span><br><span class="line">            a.student_id,</span><br><span class="line">            a.appoint_time,</span><br><span class="line">            b.book_id "book.book_id",</span><br><span class="line">            b.`name` "book.name",</span><br><span class="line">            b.number "book.number"</span><br><span class="line">        FROM</span><br><span class="line">            appointment a</span><br><span class="line">        INNER JOIN book b ON a.book_id = b.book_id</span><br><span class="line">        WHERE</span><br><span class="line">            a.book_id = #&#123;bookId&#125;</span><br><span class="line">        AND a.student_id = #&#123;studentId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.soecode.lyf.dao.AppointmentDao">    <insert id="insertAppointment">        <!-- ignore 主键冲突，报错 -->        INSERT ignore INTO appointment (book_id, student_id)        VALUES (#{bookId}, #{studentId})    </insert><pre><code>&lt;select id=&quot;queryByKeyWithBook&quot; resultType=&quot;Appointment&quot;&gt;    &lt;!-- 如何告诉MyBatis把结果映射到Appointment同时映射book属性 --&gt;    &lt;!-- 可以自由控制SQL --&gt;    SELECT        a.book_id,        a.student_id,        a.appoint_time,        b.book_id &quot;book.book_id&quot;,        b.`name` &quot;book.name&quot;,        b.number &quot;book.number&quot;    FROM        appointment a    INNER JOIN book b ON a.book_id = b.book_id    WHERE        a.book_id = #{bookId}    AND a.student_id = #{studentId}&lt;/select&gt;</code></pre></mapper><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### SQL Scheme(Tempplate)</span><br><span class="line">&#96;&#96;&#96;sql</span><br><span class="line">CREATE DATABASE &#96;ssm_temp_00&#96;</span><br><span class="line">-- 创建图书表</span><br><span class="line">CREATE TABLE &#96;book&#96; (</span><br><span class="line">  &#96;book_id&#96; bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#39;图书ID&#39;,</span><br><span class="line">  &#96;name&#96; varchar(100) NOT NULL COMMENT &#39;图书名称&#39;,</span><br><span class="line">  &#96;number&#96; int(11) NOT NULL COMMENT &#39;馆藏数量&#39;,</span><br><span class="line">  PRIMARY KEY (&#96;book_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;1000 DEFAULT CHARSET&#x3D;utf8 COMMENT&#x3D;&#39;图书表&#39;;</span><br><span class="line"></span><br><span class="line">-- 初始化图书数据</span><br><span class="line">INSERT INTO &#96;book&#96; (&#96;book_id&#96;, &#96;name&#96;, &#96;number&#96;)</span><br><span class="line">VALUES</span><br><span class="line">    (1000, &#39;Java程序设计&#39;, 10),</span><br><span class="line">    (1001, &#39;数据结构&#39;, 10),</span><br><span class="line">    (1002, &#39;设计模式&#39;, 10),</span><br><span class="line">    (1003, &#39;编译原理&#39;, 10);</span><br><span class="line"></span><br><span class="line">-- 创建预约图书表</span><br><span class="line">CREATE TABLE &#96;appointment&#96; (</span><br><span class="line">  &#96;book_id&#96; bigint(20) NOT NULL COMMENT &#39;图书ID&#39;,</span><br><span class="line">  &#96;student_id&#96; bigint(20) NOT NULL COMMENT &#39;学号&#39;,</span><br><span class="line">  &#96;appoint_time&#96; timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &#39;预约时间&#39; ,</span><br><span class="line">  PRIMARY KEY (&#96;book_id&#96;, &#96;student_id&#96;),</span><br><span class="line">  INDEX &#96;idx_appoint_time&#96; (&#96;appoint_time&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8 COMMENT&#x3D;&#39;预约图书表&#39;;</span><br></pre></td></tr></table></figure><p><strong><strong><em>JAVA</em></strong></strong><br><img src="https://github.com/CN-Robert-LIU/SSM_TP" alt="https://github.com/CN-Robert-LIU/SSM_TP"><br>/src/main/</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">├ java</span><br><span class="line">│   └ com</span><br><span class="line">│       └ robert-liu</span><br><span class="line">│           └ ssm</span><br><span class="line">│               ├ dao</span><br><span class="line">│               │   ├ AppointmentDao.java</span><br><span class="line">│               │   └ BookDao.java</span><br><span class="line">│               ├ dto</span><br><span class="line">│               │   ├ AppointExecution.java</span><br><span class="line">│               │   └ Result.java</span><br><span class="line">│               ├ entity</span><br><span class="line">│               │   ├ Appointment.java</span><br><span class="line">│               │   └ Book.java</span><br><span class="line">│               ├ enums</span><br><span class="line">│               │   └ AppointStateEnum.java</span><br><span class="line">│               ├ exception</span><br><span class="line">│               │   ├ AppointException.java</span><br><span class="line">│               │   ├ NoNumberException.java</span><br><span class="line">│               │   └ RepeatAppointException.java</span><br><span class="line">│               ├ service</span><br><span class="line">│               │   ├ BookService.java</span><br><span class="line">│               │   └ impl</span><br><span class="line">│               │       └ BookServiceImpl.java</span><br><span class="line">│               └ web</span><br><span class="line">│                   └ BookController.java</span><br><span class="line">├ resources</span><br><span class="line">│   ├ jdbc.properties</span><br><span class="line">│   ├ logback.xml</span><br><span class="line">│   ├ mapper</span><br><span class="line">│   │   ├ AppointmentDao.xml</span><br><span class="line">│   │   └ BookDao.xml</span><br><span class="line">│   ├ mybatis-config.xml</span><br><span class="line">│   └ spring</span><br><span class="line">│       ├ spring-dao.xml</span><br><span class="line">│       ├ spring-service.xml</span><br><span class="line">│       └ spring-web.xml</span><br><span class="line">├ sql</span><br><span class="line">│   └ schema.sql</span><br><span class="line">├ test.txt</span><br><span class="line">└ webapp</span><br><span class="line">    └ WEB-INF</span><br><span class="line">        ├ jsp</span><br><span class="line">        │   └ common</span><br><span class="line">        │       ├ bootstrap.jsp</span><br><span class="line">        │       ├ head.jsp</span><br><span class="line">        │       └ tag.jsp</span><br><span class="line">        ├ lib</span><br><span class="line">        │   ├ aopalliance-1.0.jar</span><br><span class="line">        │   ├ c3p0-0.9.1.2.jar</span><br><span class="line">        │   ├ commons-collections-3.2.jar</span><br><span class="line">        │   ├ commons-logging-1.2.jar</span><br><span class="line">        │   ├ commons-pool2-2.3.jar</span><br><span class="line">        │   ├ hamcrest-core-1.3.jar</span><br><span class="line">        │   ├ jackson-annotations-2.5.0.jar</span><br><span class="line">        │   ├ jackson-core-2.5.4.jar</span><br><span class="line">        │   ├ jackson-databind-2.5.4.jar</span><br><span class="line">        │   ├ javax.servlet-api-3.1.0.jar</span><br><span class="line">        │   ├ jedis-2.7.3.jar</span><br><span class="line">        │   ├ jstl-1.2.jar</span><br><span class="line">        │   ├ junit-4.11.jar</span><br><span class="line">        │   ├ logback-classic-1.1.1.jar</span><br><span class="line">        │   ├ logback-core-1.1.1.jar</span><br><span class="line">        │   ├ mybatis-3.3.0.jar</span><br><span class="line">        │   ├ mybatis-spring-1.2.3.jar</span><br><span class="line">        │   ├ mysql-connector-java-5.1.37.jar</span><br><span class="line">        │   ├ protostuff-api-1.0.8.jar</span><br><span class="line">        │   ├ protostuff-collectionschema-1.0.8.jar</span><br><span class="line">        │   ├ protostuff-core-1.0.8.jar</span><br><span class="line">        │   ├ protostuff-runtime-1.0.8.jar</span><br><span class="line">        │   ├ slf4j-api-1.7.6.jar</span><br><span class="line">        │   ├ spring-aop-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-beans-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-context-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-core-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-expression-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-jdbc-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-test-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-tx-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-web-4.1.7.RELEASE.jar</span><br><span class="line">        │   ├ spring-webmvc-4.1.7.RELEASE.jar</span><br><span class="line">        │   └ standard-1.1.2.jar</span><br><span class="line">        └ web.xml</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Project Path:&lt;a href=&quot;https://github.com/CN-Robert-LIU/SSM_TP&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;/CN-Robert-LIU/SSM_TP&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thea
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Spring" scheme="https://www.robert-liu-designer.tk/tags/Spring/"/>
    
      <category term="Framework" scheme="https://www.robert-liu-designer.tk/tags/Framework/"/>
    
  </entry>
  
  <entry>
    <title>MapReduce</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/30/MapReduce/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/30/MapReduce/</id>
    <published>2020-04-30T09:57:39.000Z</published>
    <updated>2020-04-30T11:41:52.184Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="mvn-dependencies">MVN Dependencies</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hadoop.version</span>&gt;</span>2.7.4<span class="tag">&lt;/<span class="name">hadoop.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-mapreduce-client-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="serialize-table">Serialize Table</span></h3><p>|Java Serilize Object|Map Serilize Object|</p><h3><span id="mapreduce-driver">MapReduce Driver</span></h3><p>Driver</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.robert_mapreduce.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestWcDriver</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. Obtain A Job</span></span><br><span class="line">        Job job = Job.getInstance(<span class="keyword">new</span> Configuration());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. Define Class Path</span></span><br><span class="line">        job.setJarByClass(TestWcDriver<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. Set Mapper And Reducer</span></span><br><span class="line">        job.setMapperClass(TestWcMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setReducerClass(TestWcReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. Setting Output</span></span><br><span class="line">        job.setMapOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputValueClass(IntWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputValueClass(IntWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.Setting Input Output</span></span><br><span class="line">        FileInputFormat.setInputPath(job,<span class="keyword">new</span> Path(arg[<span class="number">0</span>]))</span><br><span class="line">        FileOutputFormat.setOutputPath(job,<span class="keyword">new</span> Path(arg[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6. Submit Job</span></span><br><span class="line">        <span class="keyword">boolean</span> b = job.waitForCompletion(verbose:<span class="keyword">true</span>);</span><br><span class="line">        system.exit(b?<span class="number">0</span>:<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Reducer Class</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.robert_mapreduce.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestWcReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>,<span class="title">IntWritable</span>,<span class="title">Text</span>,<span class="title">IntWritable</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IntWritable total = <span class="keyword">new</span> IntWritable();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key,Iterable&lt;IntWritable&gt; values,Context context)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//Make Count</span></span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (IntWritable value : values) &#123;</span><br><span class="line">             sum += value.get();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        total.set(sum);</span><br><span class="line">        context.write(key,total);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mapper Class</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.robert_mapreduce.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestWcMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>,<span class="title">Text</span>,<span class="title">Text</span>,<span class="title">IntWritable</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Text word = <span class="keyword">new</span> Text();</span><br><span class="line">    <span class="keyword">private</span> IntWritable one = <span class="keyword">new</span> IntWritable();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key,Text value,Context context)</span> throw IOException </span>&#123;</span><br><span class="line">        <span class="comment">//Obtain First Line Data</span></span><br><span class="line">        String line = value.tostring();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Split Data</span></span><br><span class="line">        String[] words = line.split(regex:<span class="string">" "</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Write Data to File</span></span><br><span class="line">        <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">            <span class="comment">// context.write(new Text(word),new IntWritable(value:1))</span></span><br><span class="line">            <span class="keyword">this</span>.word.set(word)</span><br><span class="line">            context.write(<span class="keyword">this</span>.word,<span class="keyword">this</span>.one);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;mvn-dependencies&quot;&gt;MVN Dependencies&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="MapReduce" scheme="https://www.robert-liu-designer.tk/tags/MapReduce/"/>
    
  </entry>
  
  <entry>
    <title>Java-Hadoop-Test</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/30/Java-Hadoop-Test/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/30/Java-Hadoop-Test/</id>
    <published>2020-04-30T07:45:10.000Z</published>
    <updated>2020-04-30T11:23:54.678Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="configuration">Configuration</span></h3><p>1.etc/hadoop/core-site.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.etc/hadoop/hdfs-site.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.etc/hadoop/mapred-site.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.application.classpath<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4.etc/hadoop/yarn-site.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5.ssh</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa</span><br><span class="line">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized.keys</span><br><span class="line">chmod 0600 ~/.ssh/authorized.keys</span><br></pre></td></tr></table></figure><h3><span id="hadoop-operation">Hadoop Operation</span></h3><p>1.start</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> format the filesystem</span></span><br><span class="line">bin/hdfs namenode -format</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> start namenodes</span></span><br><span class="line">sbin/start-dfs.sh</span><br></pre></td></tr></table></figure><p>2.make HDFS directories</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bin/hdfs dfs -mkdir /user</span><br><span class="line">bin/hdfs dfs -mkdir /user/&lt;username&gt;</span><br></pre></td></tr></table></figure><p>3.copy local files to distributed filesystem(Upload)</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bin/hdfs dfs -mkdir input</span><br><span class="line">bin/hdfs dfs -put exc/hadoop/*.xml input</span><br></pre></td></tr></table></figure><p>4.run some examples provided</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar grep input output 'dfs[a-z.]+'</span><br></pre></td></tr></table></figure><p>5.copy files from distributed filesystem to local</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. download to <span class="built_in">local</span> and browse</span></span><br><span class="line">bin/hadoop dfs -get output output</span><br><span class="line"><span class="meta">#</span><span class="bash"> show files</span></span><br><span class="line">cat output/*</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. browse remote files</span></span><br><span class="line">bin/hadoop dfs -cat output/*</span><br></pre></td></tr></table></figure><p>6.stop serve</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sbin/stop-dfs.sh</span><br></pre></td></tr></table></figure><h3><span id="import-hadoop-maven-dependencies">Import Hadoop Maven Dependencies</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hadoop.version</span>&gt;</span>2.8.5<span class="tag">&lt;/<span class="name">hadoop.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hbase.version</span>&gt;</span>1.2.0-cdh5.12.0<span class="tag">&lt;/<span class="name">hbase.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hive.version</span>&gt;</span>1.1.0-cdh5.12.0<span class="tag">&lt;/<span class="name">hive.version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-mapreduce-client-core --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-mapreduce-client-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-client --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-yarn-api --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-yarn-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hbase<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hbase-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hbase.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hbase<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hbase-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hbase.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hive<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hive-exec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hive.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="test-hadoop">Test Hadoop</span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> robert_hadoop.test</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.BlockLocation;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FSDataInputStream;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FSDataOutputStream;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.LocatedFileStatus;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.RemoteIterator;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HDFS_Test_API</span> </span>&#123;</span><br><span class="line">    FileSystem fSystem;</span><br><span class="line">    String hadoop_url = <span class="string">"hdfs://192.168.15.134:9000"</span> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接hdfs</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> URISyntaxException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException, URISyntaxException </span>&#123;</span><br><span class="line">        Configuration configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line">        fSystem = FileSystem.get(<span class="keyword">new</span> URI(hadoop_url), configuration, <span class="string">"hadoop_robert"</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Configuration conf = new Configuration();</span></span><br><span class="line"><span class="comment">        // 1.设置用户名</span></span><br><span class="line"><span class="comment">        System.setProperty("HADOOP_USER_NAME", "hadoop_robert");</span></span><br><span class="line"><span class="comment">        // 设置要使用的文件系统是hdfs 地址为...</span></span><br><span class="line"><span class="comment">        conf.set("fs.defaultFS", hadoop_url);</span></span><br><span class="line"><span class="comment">        fs = FileSystem.get(conf);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Launch Test"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将本地文件上传</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalArgumentException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUploadFileToHdfs</span><span class="params">()</span> <span class="keyword">throws</span> IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *  比如/eee 而根目录下不存在eee这个文件夹，就会认为是要将文件传到/ 下面的eee文件里</span></span><br><span class="line"><span class="comment">         *  如果eee是一个文件夹就会在eee文件夹下使用原名字上传</span></span><br><span class="line"><span class="comment">         *  如果是/eee/ff.md就知道是要上传到/eee这个文件夹下的ff.md这个文件中</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Path loaclFilePath = <span class="keyword">new</span> Path(<span class="string">"C:/Users/Administrator/Desktop/input/block.rar"</span>)</span><br><span class="line">        Path hadoopFilePath = <span class="keyword">new</span> Path(<span class="string">"/user/block.rar"</span>)</span><br><span class="line">        fSystem.copyFromLocalFile(localFilePath, hadoopFilePath);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将hdfs文件下载到本地</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalArgumentException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDownloadFileFromHdfs</span><span class="params">()</span> <span class="keyword">throws</span> IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        fSystem.copyToLocalFile(<span class="keyword">false</span>, <span class="keyword">new</span> Path(<span class="string">"/source.txt"</span>), <span class="keyword">new</span> Path(<span class="string">"G:/HDFSDownload"</span>), <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 删除一个参数的方法以及弃用,两个参数的第二个参数表示是否要使用递归操作,如果删除的是文件夹，只要不是空文件夹，就必须设置成true允许递归操作才能删除</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteHDFS</span><span class="params">()</span> <span class="keyword">throws</span> IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        Boolean delStatusBool =fSystem.delete(<span class="keyword">new</span> Path(<span class="string">""</span>), <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (delStatus) &#123;</span><br><span class="line">           print.system.out(<span class="string">"Delete complete!"</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           print.system.out(<span class="string">"Filure delete files"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 查看目录下的文件信息</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListFiles</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException, IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        RemoteIterator&lt;LocatedFileStatus&gt; listFiles = fSystem.listFiles(<span class="keyword">new</span> Path(<span class="string">"/user"</span>), <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (listFiles.hasNext()) &#123;</span><br><span class="line">            LocatedFileStatus next = listFiles.next();</span><br><span class="line">            System.out.println(next);</span><br><span class="line">            System.out.println(next.getBlockSize());</span><br><span class="line">            System.out.println(next.getPath().getName());</span><br><span class="line">            # Only listFiles has this function</span><br><span class="line">            BlockLocation[] blockLocations = next.getBlockLocations();</span><br><span class="line">            System.out.println(<span class="string">"Start Show block"</span>);</span><br><span class="line">            <span class="keyword">for</span> (BlockLocation blockLocation : blockLocations) &#123;</span><br><span class="line">                System.out.println(blockLocation);</span><br><span class="line">                System.out.println(<span class="string">"---------"</span>);</span><br><span class="line">                <span class="comment">// offset为0是因为是第一个block</span></span><br><span class="line">                String[] hosts = blockLocation.getHosts();</span><br><span class="line">                <span class="keyword">for</span> (String string : hosts) &#123;</span><br><span class="line">                    System.out.println(string);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 向HDFS上传文件</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUploadByStream</span><span class="params">()</span> <span class="keyword">throws</span> IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// input 把数据读入</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"G:/HDFSDownload/source.txt"</span>);</span><br><span class="line">        <span class="comment">// output 把输入进来的数据写到某个地方去</span></span><br><span class="line">        FSDataOutputStream hdfsOutputStream = fSystem.create(<span class="keyword">new</span> Path(<span class="string">"/gmj/source.txt"</span>),<span class="keyword">true</span>);</span><br><span class="line">        IOUtils.copyBytes(fis, hdfsOutputStream, <span class="number">1024</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 从HDFS下载文件或文件夹</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDownloadByStream</span><span class="params">()</span> <span class="keyword">throws</span> IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        FSDataInputStream inputStream = fSystem.open(<span class="keyword">new</span> Path(<span class="string">"/gmj/source.txt"</span>));</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"C:/Users/Administrator/Desktop/output/source2.txt"</span>);</span><br><span class="line">        org.apache.commons.io.IOUtils.copy(inputStream, fos);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDownloadByStreamUseSeek</span><span class="params">()</span> <span class="keyword">throws</span> IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        FSDataInputStream inputStream = fSystem.open(<span class="keyword">new</span> Path(<span class="string">"/user/jdk-8u131-windows-x64.exe"</span>));</span><br><span class="line">        inputStream.seek(<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">128</span>);</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"C:/Users/Administrator/Desktop/output/outseek1.exe"</span>);</span><br><span class="line">        org.apache.commons.io.IOUtils.copy(inputStream, fos);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListAll</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException, IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        FileStatus[] listStatus = fSystem.listStatus(<span class="keyword">new</span> Path(<span class="string">"/"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (FileStatus fileStatus : listStatus) &#123;</span><br><span class="line">            System.out.println(fileStatus.getPath().getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取一个文件大小介于129M~256M，切块中的第二个block块的内容</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReadSecondBlock</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException, IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        FSDataInputStream inputStream = fSystem.open(<span class="keyword">new</span> Path(<span class="string">"/user/jdk-8u131-windows-x64.exe"</span>));</span><br><span class="line">        RemoteIterator&lt;LocatedFileStatus&gt; listFiles = fSystem.listFiles(<span class="keyword">new</span> Path(<span class="string">"/user/jdk-8u131-windows-x64.exe"</span>), <span class="keyword">false</span>);        </span><br><span class="line">        LocatedFileStatus next = listFiles.next();</span><br><span class="line">        BlockLocation[] blockLocations = next.getBlockLocations();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; blockLocations.length; j++) &#123;</span><br><span class="line">            System.out.println(blockLocations[j].getOffset());</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">1</span>) &#123;</span><br><span class="line">                inputStream.seek(blockLocations[j].getOffset());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"C:/Users/Administrator/Desktop/output/outseek3.exe"</span>);</span><br><span class="line">        org.apache.commons.io.IOUtils.copy(inputStream, fos);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取一个文件大于256M且切块中的第二个block块的内容</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReadSecondBlockAgain</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException, IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        FSDataInputStream inputStream = fSystem.open(<span class="keyword">new</span> Path(<span class="string">"/user/block.rar"</span>));</span><br><span class="line">        RemoteIterator&lt;LocatedFileStatus&gt; listFiles = fSystem.listFiles(<span class="keyword">new</span> Path(<span class="string">"/user/block.rar"</span>), <span class="keyword">false</span>);</span><br><span class="line">        LocatedFileStatus next = listFiles.next();</span><br><span class="line">        BlockLocation[] blockLocations = next.getBlockLocations();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; blockLocations.length; j++) &#123;</span><br><span class="line">            System.out.println(blockLocations[j].getOffset());</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">long</span> length = blockLocations[j].getLength();</span><br><span class="line">                FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"C:/Users/Administrator/Desktop/output/bigblock2.rar"</span>);</span><br><span class="line">                org.apache.commons.io.IOUtils.copyLarge(inputStream, fos, blockLocations[j].getOffset(), length);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 将一个超过两个block块的大文件以每一个文件如block0，block1， 下载下来</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDownloadFileAllBlock</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException, IllegalArgumentException, IOException </span>&#123;</span><br><span class="line">        RemoteIterator&lt;LocatedFileStatus&gt; listFiles = fSystem.listFiles(<span class="keyword">new</span> Path(<span class="string">"/user/block.rar"</span>), <span class="keyword">false</span>);</span><br><span class="line">        LocatedFileStatus next = listFiles.next();</span><br><span class="line">        BlockLocation[] blockLocations = next.getBlockLocations();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; blockLocations.length; j++) &#123;</span><br><span class="line">            FSDataInputStream inputStream = fSystem.open(<span class="keyword">new</span> Path(<span class="string">"/user/block.rar"</span>));</span><br><span class="line">            System.out.println(blockLocations[j].getOffset());</span><br><span class="line">            System.out.println(blockLocations.length);</span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"C:/Users/Administrator/Desktop/output/bigdata"</span> + j + <span class="string">".rar"</span>);</span><br><span class="line">            org.apache.commons.io.IOUtils.copyLarge(inputStream, fos, blockLocations[j].getOffset(), blockLocations[j].getLength());</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Close FileSystem Link</span></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">closeHDFSLink</span><span class="params">()</span> throw IOException </span>&#123;</span><br><span class="line">        fSystem.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;configuration&quot;&gt;Configuration&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;1.etc/hadoop/core-site.xml&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Hadoopi" scheme="https://www.robert-liu-designer.tk/tags/Hadoopi/"/>
    
  </entry>
  
  <entry>
    <title>Cloud-Nacos</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/27/Cloud-Nacos/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/27/Cloud-Nacos/</id>
    <published>2020-04-27T09:04:24.000Z</published>
    <updated>2020-04-27T11:11:33.521Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="deploy-mode">Deploy Mode</span></h3><ul><li>Standalone<br>modify conf/application.properties<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring.datasource.platform&#x3D;mysql</span><br><span class="line"></span><br><span class="line">db.num&#x3D;1</span><br><span class="line">db.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;nacos_devtest?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true</span><br><span class="line">db.user&#x3D;nacos_devtest</span><br><span class="line">db.password&#x3D;xxxxxx</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Note:</span><br><span class="line">bin&#x2F;startup.sh</span><br><span class="line">export MODE&#x3D;&quot;standalone&quot;</span><br><span class="line">if[&quot;$&#123;MODE&#125;&quot; &#x3D;&#x3D; &quot;standalone&quot;];then</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bin&#x2F;shutup.sh -m standalone</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Cluster</p><img alt="deployDnsVipMode.jpg" src="https://cdn.nlark.com/yuque/0/2019/jpeg/338441/1561258986171-4ddec33c-a632-4ec3-bfff-7ef4ffc33fb9.jpeg">Setting:(At least three nodes)nacos/cluster.conf<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ip:port</span><br><span class="line">200.8.9.16:8848</span><br><span class="line">200.8.9.17:8848</span><br><span class="line">200.8.9.18:8848</span><br></pre></td></tr></table></figure></li><li><p>MutiCluster<br>Support Nameserver route</p></li></ul><p>1.ip-address Parameter</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nacos.inetutils.ip-address&#x3D;10.11.105.155</span><br></pre></td></tr></table></figure><p>2.use-only-site-local-interfaces Parameter(Support Local Site)</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nacos.inetutils.use-only-site-local-interfaces&#x3D;true</span><br></pre></td></tr></table></figure><p>3.ignored-interfaces Parameters</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nacos.inetutils.ignored-interfaces[0]&#x3D;eth0</span><br><span class="line">nacos.inetutils.ignored-interfaces[1]&#x3D;eth1</span><br></pre></td></tr></table></figure><p>4.preferred-networks Parameters (Support Regexpression)</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nacos.inetutils.preferred-networks[0]&#x3D;30.5.124.</span><br><span class="line">nacos.inetutils.preferred-networks[0]&#x3D;30.5.124.(25[0-5]|2[0-4]\\d|((1d&#123;2&#125;)|([1-9]?\\d))),30.5.124.(25[0-5]|2[0-4]\\d|((1d&#123;2&#125;)|([1-9]?\\d)))</span><br></pre></td></tr></table></figure><h3><span id="service-server-start">Service Server Start</span></h3><p>Linux/Unix/Mac</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Start Server without parameter(Cluster Mode):</span><br><span class="line">sh startup.sh</span><br></pre></td></tr></table></figure><h3><span id="service-registerampfoudampsetting-management">Service Register&amp;Foud&amp;Setting Management</span></h3><p>1.Service Register</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -X PUT <span class="string">'http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=nacos.naming.serviceName&amp;ip=20.18.7.10&amp;port=8080'</span></span><br></pre></td></tr></table></figure><p>2.Service Find</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -X GET <span class="string">'http://127.0.0.1:8848/nacos/v1/ns/instances?serviceName=nacos.naming.serviceName'</span></span><br></pre></td></tr></table></figure><p>3.deploy setting</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -X POST <span class="string">"http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&amp;content=helloWorld"</span></span><br></pre></td></tr></table></figure><p>4.Obtain Setting</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -X GET <span class="string">"http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test"</span></span><br></pre></td></tr></table></figure><h3><span id="shut-down-server">Shut down Server</span></h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sh shutdown.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;deploy-mode&quot;&gt;Deploy Mode&lt;/span&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Standalone&lt;br&gt;modify conf/application.properties&lt;figure class=&quot;highlight plain&quot;&gt;&lt;
      
    
    </summary>
    
    
    
      <category term="MicroService" scheme="https://www.robert-liu-designer.tk/tags/MicroService/"/>
    
      <category term="Nacos" scheme="https://www.robert-liu-designer.tk/tags/Nacos/"/>
    
  </entry>
  
  <entry>
    <title>Java-Swing</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/23/Java-Swing/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/23/Java-Swing/</id>
    <published>2020-04-23T13:37:24.000Z</published>
    <updated>2020-04-27T09:24:40.763Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="swing-class-tree">Swing Class Tree</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Object</span><br><span class="line">    *Component</span><br><span class="line">        Container</span><br><span class="line">            *JComponent</span><br><span class="line">                *AbstractButton</span><br><span class="line">                    JButton</span><br><span class="line">                    JMenuItem</span><br><span class="line">                        JCheckBonMenuItem</span><br><span class="line">                        JMenu</span><br><span class="line">                        JRadioButonMenuItem</span><br><span class="line">                    *JToggleButton</span><br><span class="line">                        JCheckBox</span><br><span class="line">                        JRadioButton</span><br><span class="line">                Box </span><br><span class="line">                Filler</span><br><span class="line">                JColorChooser</span><br><span class="line">                JComboBox</span><br><span class="line">                JDesktopIcon</span><br><span class="line">                JFileChooser</span><br><span class="line">                JInternalFrame</span><br><span class="line">                JLabel</span><br><span class="line">                JLayeredPane</span><br><span class="line">                    JDesktopPane</span><br><span class="line">                JList</span><br><span class="line">                JMenuBar</span><br><span class="line">                JOptionPane</span><br><span class="line">                JPanel</span><br><span class="line">                JPopupMenu</span><br><span class="line">                JProgressBar</span><br><span class="line">                JRootPane</span><br><span class="line">                JScrollBar</span><br><span class="line">                JScrollPane</span><br><span class="line">                JSeparator</span><br><span class="line">                JSlider</span><br><span class="line">                JSplitPane</span><br><span class="line">                JTabbedPane</span><br><span class="line">                JTable</span><br><span class="line">                JTableHeader</span><br><span class="line">                *JTextComponent</span><br><span class="line">                    JEditorPane</span><br><span class="line">                        FrameEditorPane</span><br><span class="line">                        JTextPane</span><br><span class="line">                    JTextArea</span><br><span class="line">                    JtextField</span><br><span class="line">                        JPasswordField</span><br><span class="line">                JToolBar</span><br><span class="line">                JToolTip</span><br><span class="line">                JTree</span><br><span class="line">                JViewport</span><br><span class="line">                    ScrollableTabViewport</span><br><span class="line">            Panel</span><br><span class="line">                Applet</span><br><span class="line">                    JApplet</span><br><span class="line">            Window</span><br><span class="line">                Dialog</span><br><span class="line">                    JDialog</span><br><span class="line">                Frame</span><br><span class="line">                    JFrame</span><br><span class="line">                JWindow</span><br></pre></td></tr></table></figure><h3><span id="event-listener">Event Listener</span></h3><table style="height: 1072px; width: 1000px;" border="0"><tbody><tr><td>Event：事件</td><td>Condition：触发条件</td><td>Listener：监听器　</td><td>Adapter：适配器</td><td>Method:方法</td></tr><tr><td>KeyEvent&nbsp; &nbsp;键盘事件</td><td><p>Kick or release one specific keyboard：</p><p>按下、松开、单击键盘上的某个键时触发</p></td><td>&nbsp;KeyListener　　　　</td><td>&nbsp;KeyAdapter</td><td><p>keyPressed：按下某个键时触发</p><p>keyReleased：松开某个键时触发</p><p>keyTyped：单击某个键时触发</p></td></tr><tr><td>MouseEvent&nbsp; &nbsp;鼠标事件</td><td>&nbsp;</td><td><p>&nbsp;MouseListener</p><p>&nbsp;</p><p>MouseMotionListener</p></td><td><p>&nbsp;MouseAdapter</p><p>&nbsp;</p><p>MouseMotionAdapter</p></td><td><p>MouseListener的5个方法：</p><p>mousePressed：按下某个鼠标键时触发</p><p>mouseReleased：松开某个鼠标键时触发</p><p>mouseClicked：单击某个鼠标键时触发</p><p>mouseEntered：鼠标移入该组件时触发</p><p>mouseExited：鼠标移出该组件时触发</p><p>&nbsp;</p><p>MouseMotionListener的2个方法：</p><p>mouseMoved：在该组件上移动鼠标时触发</p><p>mouseDragged：在该组件上按下某个鼠标键并移动鼠标时触发，如在画布上画图</p></td></tr><tr><td>FocusEvent&nbsp; &nbsp;焦点事件</td><td>Obtain or loss focus：获得焦点、失去焦点时触发</td><td>&nbsp;FocusListener</td><td>&nbsp;FocusAdapter</td><td><p>focusGained：获取焦点时触发</p><p>focusLost：失去焦点时触发</p></td></tr><tr><td>WindowEvent&nbsp; 窗体事件</td><td><p>Open or close window：</p><p>打开窗口、关闭窗口，</p><p>Mimiax window：</p><p>窗口最大化、最小化时触发</p></td><td>&nbsp;WindowListener</td><td>&nbsp;WindowAdapter</td><td><p>windowOpened：打开窗口时触发</p><p>windowClosing：单击右上角的“X”时触发</p><p>windowClosed：调用dispose()释放窗体资源时触发</p><p>&nbsp;</p><p>windowDeactivated：窗口失活（失去焦点）时触发</p><p>windowDeiconified：窗口重新获得焦点时触发（恢复）</p><p>windowActivated：窗口被激活（获得焦点）时触发，首次+恢复</p><p>&nbsp;</p><p>windowIconified：窗口最小化时触发</p></td></tr><tr><td>ContainerEvent&nbsp; &nbsp;容器事件</td><td>往容器中添加、移除组件时触发</td><td>ContainerListener　　</td><td>ContainerAdapter</td><td><p>componentAdded:往容器中添加组件时触发</p><p>componentRemoved：从容器中移除组件时触发</p></td></tr><tr><td>ComponentEvent&nbsp; 组件事件</td><td><p>Componet size changed：组件的尺寸发生变化、</p><p>Positions changed：位置发生改变、</p><p>Hide or show component：组件被隐藏/显示时触发</p></td><td>&nbsp;ComponentListener</td><td>&nbsp;ComponentAdapter</td><td><p>componentResized：组件尺寸发生变化时触发</p><p>componentMoved：组件的位置发生改变时触发</p><p>componentHidden：组件被隐藏时触发</p><p>componentShown：组件被显示时触发</p></td></tr><tr><td>PaintEvent&nbsp; 组件绘制事件</td><td>调用组件的paint()/update()来绘制时触发</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table><h3><span id="implements-listener">Implements Listener</span></h3><p>1.Inner Class：内部类<br>2.Anonymous Inner Class：匿名内部类<br>3.Outer Class：外部类(如实例化)<br>4.Class itself by Implement Interface or Extends Adapter Class and override its methods (Not Approved);类自身通过继承复写适配器或者继承监听器接口的方式（不推荐）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;swing-class-tree&quot;&gt;Swing Class Tree&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;li
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="GUI" scheme="https://www.robert-liu-designer.tk/tags/GUI/"/>
    
  </entry>
  
  <entry>
    <title>selinum-python</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/20/selenium-python/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/20/selenium-python/</id>
    <published>2020-04-20T10:51:45.000Z</published>
    <updated>2020-04-23T15:17:11.069Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="install">Install</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pip3 install selenium</span></span><br></pre></td></tr></table></figure><h2><span id="support-browser">Support Browser…</span></h2><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">Chrome</td><td align="center">Edge</td><td align="center">Firefox</td><td align="center">Safari</td></tr></tbody></table><h3><span id="obtain-dirver">Obtain Dirver</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">mydriver = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">webdriver.Firefox</span></span><br><span class="line"><span class="string">webdriver.FirefoxProfile</span></span><br><span class="line"><span class="string">webdriver.ChromeOptions</span></span><br><span class="line"><span class="string">webdriver.Ie</span></span><br><span class="line"><span class="string">webdriver.Opera</span></span><br><span class="line"><span class="string">webdriver.PhantomJS</span></span><br><span class="line"><span class="string">webdriver.Remote</span></span><br><span class="line"><span class="string">webdriver.DesiredCapabilities</span></span><br><span class="line"><span class="string">webdriver.ActionChains</span></span><br><span class="line"><span class="string">webdriver.TouchActions</span></span><br><span class="line"><span class="string">webdriver.Proxy</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h3><span id="exception">Exception</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> [TheNameOfTheExceptionClass]</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">WebDriverException</span></span><br><span class="line"><span class="string">  ElementClickInterceptedException</span></span><br><span class="line"><span class="string">  ErrorInResponseException</span></span><br><span class="line"><span class="string">  ImeActivationFailedException</span></span><br><span class="line"><span class="string">  ImeNotAvailableException</span></span><br><span class="line"><span class="string">  InsecureCertificateException</span></span><br><span class="line"><span class="string">  InvalidArgumentException</span></span><br><span class="line"><span class="string">  InvalidCookieDomainException</span></span><br><span class="line"><span class="string">  InvalidSessionIdException</span></span><br><span class="line"><span class="string">  InvalidCoordinatesException</span></span><br><span class="line"><span class="string">  InvalidSwitchToTargetException</span></span><br><span class="line"><span class="string">      MoveTargetOutOfBoundsException</span></span><br><span class="line"><span class="string">      NoSuchWindowException</span></span><br><span class="line"><span class="string">  NoSuchFrameException</span></span><br><span class="line"><span class="string">  NoAlertPresentException</span></span><br><span class="line"><span class="string">  NoSuchAttributeException</span></span><br><span class="line"><span class="string">  NoSuchCookieException  </span></span><br><span class="line"><span class="string">  NoSuchElementException  </span></span><br><span class="line"><span class="string">  InvalidElementStateExceptio</span></span><br><span class="line"><span class="string">      ElementNotInteractableException</span></span><br><span class="line"><span class="string">      ElementNotSelectableException</span></span><br><span class="line"><span class="string">      ElementNotVisibleException</span></span><br><span class="line"><span class="string">  NoSuchElementException</span></span><br><span class="line"><span class="string">    InvalidSelectorException</span></span><br><span class="line"><span class="string">  RemoteDriverServerException</span></span><br><span class="line"><span class="string">  ScreenshotException</span></span><br><span class="line"><span class="string">  SessionNotCreatedException</span></span><br><span class="line"><span class="string">  StaleElementReferenceException</span></span><br><span class="line"><span class="string">  TimeoutException</span></span><br><span class="line"><span class="string">  UnableToSetCookieException</span></span><br><span class="line"><span class="string">  UnexpectedAlertPresentException</span></span><br><span class="line"><span class="string">  UnexpectedTagNameException</span></span><br><span class="line"><span class="string">  UnknownMethodException</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h3><span id="action-chain">Action Chain</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">__init__(driver)</span><br><span class="line"><span class="comment"># driver: The WebDriver instance which performs user actions.</span></span><br><span class="line"></span><br><span class="line">click(on_element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># on_element: The element to click. If None, clicks on current mouse position.</span></span><br><span class="line"></span><br><span class="line">click_and_hold(on_element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># on_element: The element to mouse down. If None, clicks on current mouse position.</span></span><br><span class="line"></span><br><span class="line">context_click(on_element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># on_element: The element to context-click. If None, clicks on current mouse position.</span></span><br><span class="line"></span><br><span class="line">double_click(on_element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># on_element: The element to double-click. If None, clicks on current mouse position.</span></span><br><span class="line"></span><br><span class="line">drag_and_drop(source, target)</span><br><span class="line"><span class="comment"># source: The element to mouse down.</span></span><br><span class="line"><span class="comment"># target: The element to mouse up.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">drag_and_drop_by_offset(source, xoffset, yoffset)</span><br><span class="line"><span class="comment"># source: The element to mouse down.</span></span><br><span class="line"><span class="comment"># xoffset: X offset to move to.</span></span><br><span class="line"><span class="comment"># yoffset: Y offset to move to.</span></span><br><span class="line"></span><br><span class="line">key_down(value, element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># value: The modifier key to send. Values are defined in Keys class.</span></span><br><span class="line"><span class="comment"># element: The element to send keys. If None, sends a key to current focused element.</span></span><br><span class="line"><span class="comment">##  ActionChains(driver).key_down(Keys.CONTROL).send_keys('c').key_up(Keys.CONTROL).perform()</span></span><br><span class="line"></span><br><span class="line">key_up(value, element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># value: The modifier key to send. Values are defined in Keys class.</span></span><br><span class="line"><span class="comment"># element: The element to send keys. If None, sends a key to current focused element.</span></span><br><span class="line"><span class="comment">#   ActionChains(driver).key_down(Keys.CONTROL).send_keys('c').key_up(Keys.CONTROL).perform()</span></span><br><span class="line"></span><br><span class="line">move_by_offset(xoffset, yoffset)</span><br><span class="line"><span class="comment"># xoffset: X offset to move to, as a positive or negative integer.</span></span><br><span class="line"><span class="comment"># yoffset: Y offset to move to, as a positive or negative integer.</span></span><br><span class="line"></span><br><span class="line">move_to_element(to_element)</span><br><span class="line"><span class="comment"># to_element: The WebElement to move to.</span></span><br><span class="line"></span><br><span class="line">move_to_element_with_offset(to_element, xoffset, yoffset)</span><br><span class="line"><span class="comment"># to_element: The WebElement to move to.</span></span><br><span class="line"><span class="comment"># xoffset: X offset to move to.</span></span><br><span class="line"><span class="comment"># yoffset: Y offset to move to.</span></span><br><span class="line"></span><br><span class="line">pause(seconds)</span><br><span class="line"></span><br><span class="line">perform()</span><br><span class="line"></span><br><span class="line">release(on_element=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># on_element: The element to mouse up. If None, releases on current mouse position.</span></span><br><span class="line"></span><br><span class="line">reset_actions()</span><br><span class="line"></span><br><span class="line">send_keys(*keys_to_send)</span><br><span class="line"><span class="comment"># keys_to_send: The keys to send. Modifier keys constants can be found in the ‘Keys’ class.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">send_keys_to_element(element, *keys_to_send)</span><br><span class="line"><span class="comment"># element: The element to send keys.</span></span><br><span class="line"><span class="comment"># keys_to_send: The keys to send. Modifier keys constants can be found in the ‘Keys’ class.</span></span><br></pre></td></tr></table></figure><h3><span id="special-key">Special Key</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">selenium</span>.<span class="title">webdriver</span>.<span class="title">common</span>.<span class="title">keys</span>.<span class="title">Keys</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">'''</span></span><br><span class="line">ADD = u'\ue025'</span><br><span class="line">ALT = <span class="string">u'\ue00a'</span></span><br><span class="line">ARROW_DOWN = <span class="string">u'\ue015'</span></span><br><span class="line">ARROW_LEFT = <span class="string">u'\ue012'</span></span><br><span class="line">ARROW_RIGHT = <span class="string">u'\ue014'</span></span><br><span class="line">ARROW_UP = <span class="string">u'\ue013'</span></span><br><span class="line">BACKSPACE = <span class="string">u'\ue003'</span></span><br><span class="line">BACK_SPACE = <span class="string">u'\ue003'</span></span><br><span class="line">CANCEL = <span class="string">u'\ue001'</span></span><br><span class="line">CLEAR = <span class="string">u'\ue005'</span></span><br><span class="line">COMMAND = <span class="string">u'\ue03d'</span></span><br><span class="line">CONTROL = <span class="string">u'\ue009'</span></span><br><span class="line">DECIMAL = <span class="string">u'\ue028'</span></span><br><span class="line">DELETE = <span class="string">u'\ue017'</span></span><br><span class="line">DIVIDE = <span class="string">u'\ue029'</span></span><br><span class="line">DOWN = <span class="string">u'\ue015'</span></span><br><span class="line">END = <span class="string">u'\ue010'</span></span><br><span class="line">ENTER = <span class="string">u'\ue007'</span></span><br><span class="line">EQUALS = <span class="string">u'\ue019'</span></span><br><span class="line">ESCAPE = <span class="string">u'\ue00c'</span></span><br><span class="line"></span><br><span class="line">F1 = <span class="string">u'\ue031'</span></span><br><span class="line">F10 = <span class="string">u'\ue03a'</span></span><br><span class="line">F11 = <span class="string">u'\ue03b'</span></span><br><span class="line">F12 = <span class="string">u'\ue03c'</span></span><br><span class="line">F2 = <span class="string">u'\ue032'</span></span><br><span class="line">F3 = <span class="string">u'\ue033'</span></span><br><span class="line">F4 = <span class="string">u'\ue034'</span></span><br><span class="line">F5 = <span class="string">u'\ue035'</span></span><br><span class="line">F6 = <span class="string">u'\ue036'</span></span><br><span class="line">F7 = <span class="string">u'\ue037'</span></span><br><span class="line">F8 = <span class="string">u'\ue038'</span></span><br><span class="line">F9 = <span class="string">u'\ue039'</span></span><br><span class="line"></span><br><span class="line">HELP = <span class="string">u'\ue002'</span></span><br><span class="line">HOME = <span class="string">u'\ue011'</span></span><br><span class="line">INSERT = <span class="string">u'\ue016'</span></span><br><span class="line">LEFT = <span class="string">u'\ue012'</span></span><br><span class="line">LEFT_ALT = <span class="string">u'\ue00a'</span></span><br><span class="line">LEFT_CONTROL = <span class="string">u'\ue009'</span></span><br><span class="line">LEFT_SHIFT = <span class="string">u'\ue008'</span></span><br><span class="line">META = <span class="string">u'\ue03d'</span></span><br><span class="line">MULTIPLY = <span class="string">u'\ue024'</span></span><br><span class="line">NULL = <span class="string">u'\ue000'</span></span><br><span class="line"></span><br><span class="line">NUMPAD0 = <span class="string">u'\ue01a'</span></span><br><span class="line">NUMPAD1 = <span class="string">u'\ue01b'</span></span><br><span class="line">NUMPAD2 = <span class="string">u'\ue01c'</span></span><br><span class="line">NUMPAD3 = <span class="string">u'\ue01d'</span></span><br><span class="line">NUMPAD4 = <span class="string">u'\ue01e'</span></span><br><span class="line">NUMPAD5 = <span class="string">u'\ue01f'</span></span><br><span class="line">NUMPAD6 = <span class="string">u'\ue020'</span></span><br><span class="line">NUMPAD7 = <span class="string">u'\ue021'</span></span><br><span class="line">NUMPAD8 = <span class="string">u'\ue022'</span></span><br><span class="line">NUMPAD9 = <span class="string">u'\ue023'</span></span><br><span class="line"></span><br><span class="line">PAGE_DOWN = <span class="string">u'\ue00f'</span></span><br><span class="line">PAGE_UP = <span class="string">u'\ue00e'</span></span><br><span class="line">PAUSE = <span class="string">u'\ue00b'</span></span><br><span class="line">RETURN = <span class="string">u'\ue006'</span></span><br><span class="line">RIGHT = <span class="string">u'\ue014'</span></span><br><span class="line"></span><br><span class="line">SEMICOLON = <span class="string">u'\ue018'</span></span><br><span class="line">SEPARATOR = <span class="string">u'\ue026'</span></span><br><span class="line">SHIFT = <span class="string">u'\ue008'</span></span><br><span class="line">SPACE = <span class="string">u'\ue00d'</span></span><br><span class="line">SUBTRACT = <span class="string">u'\ue027'</span></span><br><span class="line">TAB = <span class="string">u'\ue004'</span></span><br><span class="line">UP = <span class="string">u'\ue013'</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h3><span id="location-element">Location Element</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">CLASS:</span></span><br><span class="line"><span class="string">    selenium.webdriver.common.by.By</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">CLASS_NAME = 'class name'</span></span><br><span class="line"><span class="string">CSS_SELECTOR = 'css selector'</span></span><br><span class="line"><span class="string">ID = 'id'</span></span><br><span class="line"><span class="string">LINK_TEXT = 'link text'</span></span><br><span class="line"><span class="string">NAME = 'name'</span></span><br><span class="line"><span class="string">PARTIAL_LINK_TEXT = 'partial link text'</span></span><br><span class="line"><span class="string">TAG_NAME = 'tag name'</span></span><br><span class="line"><span class="string">XPATH = 'xpath'¶CLASS_NAME = 'class name'</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># driver.find_element_by_xxx</span></span><br></pre></td></tr></table></figure><h3><span id="remote-driver-desired-capabilities">Remote Driver Desired Capabilities</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># class selenium.webdriver.common.desired_capabilities.DesiredCapabilities</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">selenium_grid_url = <span class="string">"http://198.0.0.1:4444/wd/hub"</span></span><br><span class="line"><span class="comment"># Create a desired capabilities object as a starting point.</span></span><br><span class="line">capabilities = DesiredCapabilities.FIREFOX.copy()</span><br><span class="line">capabilities[<span class="string">'platform'</span>] = <span class="string">"WINDOWS"</span></span><br><span class="line">capabilities[<span class="string">'version'</span>] = <span class="string">"10"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Instantiate an instance of Remote WebDriver with the desired capabilities.</span></span><br><span class="line">driver = webdriver.Remote(desired_capabilities=capabilities,</span><br><span class="line">                          command_executor=selenium_grid_url)</span><br></pre></td></tr></table></figure><p>Driver Support:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ANDROID &#x3D; &#123;&#39;browserName&#39;: &#39;android&#39;, &#39;platform&#39;: &#39;ANDROID&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">CHROME &#x3D; &#123;&#39;browserName&#39;: &#39;chrome&#39;, &#39;platform&#39;: &#39;ANY&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">EDGE &#x3D; &#123;&#39;browserName&#39;: &#39;MicrosoftEdge&#39;, &#39;platform&#39;: &#39;WINDOWS&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">FIREFOX &#x3D; &#123;&#39;acceptInsecureCerts&#39;: True, &#39;browserName&#39;: &#39;firefox&#39;, &#39;marionette&#39;: True&#125;</span><br><span class="line">HTMLUNIT &#x3D; &#123;&#39;browserName&#39;: &#39;htmlunit&#39;, &#39;platform&#39;: &#39;ANY&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">HTMLUNITWITHJS &#x3D; &#123;&#39;browserName&#39;: &#39;htmlunit&#39;, &#39;javascriptEnabled&#39;: True, &#39;platform&#39;: &#39;ANY&#39;, &#39;version&#39;: &#39;firefox&#39;&#125;</span><br><span class="line">INTERNETEXPLORER &#x3D; &#123;&#39;browserName&#39;: &#39;internet explorer&#39;, &#39;platform&#39;: &#39;WINDOWS&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">IPAD &#x3D; &#123;&#39;browserName&#39;: &#39;iPad&#39;, &#39;platform&#39;: &#39;MAC&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">IPHONE &#x3D; &#123;&#39;browserName&#39;: &#39;iPhone&#39;, &#39;platform&#39;: &#39;MAC&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">OPERA &#x3D; &#123;&#39;browserName&#39;: &#39;opera&#39;, &#39;platform&#39;: &#39;ANY&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">PHANTOMJS &#x3D; &#123;&#39;browserName&#39;: &#39;phantomjs&#39;, &#39;javascriptEnabled&#39;: True, &#39;platform&#39;: &#39;ANY&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">SAFARI &#x3D; &#123;&#39;browserName&#39;: &#39;safari&#39;, &#39;platform&#39;: &#39;MAC&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br><span class="line">WEBKITGTK &#x3D; &#123;&#39;browserName&#39;: &#39;MiniBrowser&#39;, &#39;platform&#39;: &#39;ANY&#39;, &#39;version&#39;: &#39;&#39;&#125;</span><br></pre></td></tr></table></figure><h3><span id="touch-action-implement">Touch Action Implement</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># class selenium.webdriver.common.touch_actions.TouchActions(driver)</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">init__(driver)</span><br><span class="line">driver: The WebDriver instance which performs user actions. It should be with touchscreen enabled.</span><br><span class="line"></span><br><span class="line">double_tap(on_element)</span><br><span class="line"># on_element: The element to tap.</span><br><span class="line"></span><br><span class="line">flick(xspeed, yspeed)</span><br><span class="line"># xspeed: The X speed in pixels per second.</span><br><span class="line"># yspeed: The Y speed in pixels per second.</span><br><span class="line"></span><br><span class="line">flick_element(on_element, xoffset, yoffset, speed)</span><br><span class="line"># on_element: Flick will start at center of element.</span><br><span class="line"># xoffset: X offset to flick to.</span><br><span class="line"># yoffset: Y offset to flick to.</span><br><span class="line"># speed: Pixels per second to flick.</span><br><span class="line"></span><br><span class="line">long_press(on_element)</span><br><span class="line"># on_element: The element to long press.</span><br><span class="line"></span><br><span class="line">move(xcoord, ycoord)</span><br><span class="line"># xcoord: X Coordinate to move.</span><br><span class="line"># ycoord: Y Coordinate to move.</span><br><span class="line"></span><br><span class="line">perform()</span><br><span class="line"># perform all stored action</span><br><span class="line"></span><br><span class="line">release(xcoord, ycoord)</span><br><span class="line"># xcoord: X Coordinate to release.</span><br><span class="line"># ycoord: Y Coordinate to release.</span><br><span class="line"></span><br><span class="line">scroll(xoffset, yoffset)</span><br><span class="line"># xoffset: X offset to scroll to.</span><br><span class="line"># yoffset: Y offset to scroll to.</span><br><span class="line"></span><br><span class="line">scroll_from_element(on_element, xoffset, yoffset)</span><br><span class="line"># on_element: The element where scroll starts.</span><br><span class="line"># xoffset: X offset to scroll to.</span><br><span class="line"># yoffset: Y offset to scroll to.</span><br><span class="line"></span><br><span class="line">tap(on_element)</span><br><span class="line"># on_element: The element to tap.</span><br><span class="line"></span><br><span class="line">tap_and_hold(xcoord, ycoord)</span><br><span class="line"># xcoord: X Coordinate to touch down.</span><br><span class="line"># ycoord: Y Coordinate to touch down.</span><br><span class="line">&#39;&#39;&#39;</span><br></pre></td></tr></table></figure><h3><span id="remote-driver-error-handle">Remote Driver Error Handle</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ELEMENT_CLICK_INTERCEPTED &#x3D; [64, &#39;element click intercepted&#39;]</span><br><span class="line">ELEMENT_IS_NOT_SELECTABLE &#x3D; [15, &#39;element not selectable&#39;]</span><br><span class="line">ELEMENT_NOT_INTERACTABLE &#x3D; [60, &#39;element not interactable&#39;]</span><br><span class="line">ELEMENT_NOT_VISIBLE &#x3D; [11, &#39;element not visible&#39;]</span><br><span class="line">IME_ENGINE_ACTIVATION_FAILED &#x3D; [31, &#39;ime engine activation failed&#39;]</span><br><span class="line">IME_NOT_AVAILABLE &#x3D; [30, &#39;ime not available&#39;]</span><br><span class="line">INSECURE_CERTIFICATE &#x3D; [&#39;insecure certificate&#39;]</span><br><span class="line">INVALID_ARGUMENT &#x3D; [61, &#39;invalid argument&#39;]</span><br><span class="line">INVALID_COOKIE_DOMAIN &#x3D; [24, &#39;invalid cookie domain&#39;]</span><br><span class="line">INVALID_COORDINATES &#x3D; [&#39;invalid coordinates&#39;]</span><br><span class="line">INVALID_ELEMENT_COORDINATES &#x3D; [29, &#39;invalid element coordinates&#39;]</span><br><span class="line">INVALID_ELEMENT_STATE &#x3D; [12, &#39;invalid element state&#39;]</span><br><span class="line">INVALID_SELECTOR &#x3D; [32, &#39;invalid selector&#39;]</span><br><span class="line">INVALID_SESSION_ID &#x3D; [&#39;invalid session id&#39;]</span><br><span class="line">INVALID_XPATH_SELECTOR &#x3D; [51, &#39;invalid selector&#39;]</span><br><span class="line">INVALID_XPATH_SELECTOR_RETURN_TYPER &#x3D; [52, &#39;invalid selector&#39;]</span><br><span class="line">JAVASCRIPT_ERROR &#x3D; [17, &#39;javascript error&#39;]</span><br><span class="line">METHOD_NOT_ALLOWED &#x3D; [405, &#39;unsupported operation&#39;]</span><br><span class="line">MOVE_TARGET_OUT_OF_BOUNDS &#x3D; [34, &#39;move target out of bounds&#39;]</span><br><span class="line">NO_ALERT_OPEN &#x3D; [27, &#39;no such alert&#39;]</span><br><span class="line">NO_SUCH_COOKIE &#x3D; [62, &#39;no such cookie&#39;]</span><br><span class="line">NO_SUCH_ELEMENT &#x3D; [7, &#39;no such element&#39;]</span><br><span class="line">NO_SUCH_FRAME &#x3D; [8, &#39;no such frame&#39;]</span><br><span class="line">NO_SUCH_WINDOW &#x3D; [23, &#39;no such window&#39;]</span><br><span class="line">SCRIPT_TIMEOUT &#x3D; [28, &#39;script timeout&#39;]</span><br><span class="line">SESSION_NOT_CREATED &#x3D; [33, &#39;session not created&#39;]</span><br><span class="line">STALE_ELEMENT_REFERENCE &#x3D; [10, &#39;stale element reference&#39;]</span><br><span class="line">SUCCESS &#x3D; 0</span><br><span class="line">TIMEOUT &#x3D; [21, &#39;timeout&#39;]</span><br><span class="line">UNABLE_TO_CAPTURE_SCREEN &#x3D; [63, &#39;unable to capture screen&#39;]</span><br><span class="line">UNABLE_TO_SET_COOKIE &#x3D; [25, &#39;unable to set cookie&#39;]</span><br><span class="line">UNEXPECTED_ALERT_OPEN &#x3D; [26, &#39;unexpected alert open&#39;]</span><br><span class="line">UNKNOWN_COMMAND &#x3D; [9, &#39;unknown command&#39;]</span><br><span class="line">UNKNOWN_ERROR &#x3D; [13, &#39;unknown error&#39;]</span><br><span class="line">UNKNOWN_METHOD &#x3D; [&#39;unknown method exception&#39;]</span><br><span class="line">XPATH_LOOKUP_ERROR &#x3D; [19, &#39;invalid selector&#39;]</span><br></pre></td></tr></table></figure><h3><span id="remote-dirver-implement">Remote Dirver Implement</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">driver.add_cookie(&#123;</span><br><span class="line">    <span class="string">'name'</span> : <span class="string">'foo’,</span></span><br><span class="line"><span class="string">    '</span>value<span class="string">':'</span>ba<span class="string">r'</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string">driver.delete_all_cookies()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">driver.back()</span></span><br><span class="line"><span class="string">driver.forward()</span></span><br><span class="line"><span class="string">driver.close()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">script = "var callback = arguments[arguments.length - 1];</span></span><br><span class="line"><span class="string">           window.setTimeout(function()&#123; callback(‘timeout’) &#125;, 3000);"</span></span><br><span class="line"><span class="string">driver.execute_async_script(script)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">driver.execute_script('</span><span class="keyword">return</span> document.title;<span class="string">')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Write file path</span></span><br><span class="line"><span class="string">with webdriver.file_detector_context(UselessFileDetector):</span></span><br><span class="line"><span class="string">      someinput.send_keys('</span>/etc/hosts<span class="string">')</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2&gt;&lt;span id=&quot;install&quot;&gt;Install&lt;/span&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;m
      
    
    </summary>
    
    
    
      <category term="Python" scheme="https://www.robert-liu-designer.tk/tags/Python/"/>
    
      <category term="Test" scheme="https://www.robert-liu-designer.tk/tags/Test/"/>
    
  </entry>
  
  <entry>
    <title>Idempotence Of Interface</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/16/Idempotence-Of-Interface/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/16/Idempotence-Of-Interface/</id>
    <published>2020-04-16T07:55:16.000Z</published>
    <updated>2020-04-23T13:43:04.354Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="gloable-id">Gloable ID</span></h2><p>If existed, which has been executed. Otherwise, storage ID into database and execut task.</p><h3><span id="deduplicate-table">Deduplicate Table</span></h3><p>Put task and write into dumplicate table task into one transaction.</p><h3><span id="insert-or-update">Insert Or Update</span></h3><p>double keys build one index and operate them:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> goods_category (goods_id,category_id,create_time,update_time)</span><br><span class="line"><span class="keyword">values</span>(<span class="comment">#&#123;goodsId&#125;,#&#123;categoryId&#125;,now(),now())</span></span><br><span class="line"><span class="keyword">on</span> <span class="keyword">DUPLICATE</span> <span class="keyword">KEY</span> <span class="keyword">UPDATE</span></span><br><span class="line">update_time=<span class="keyword">now</span>()</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">insertOrUpdate</span><span class="params">(<span class="keyword">int</span> goodsid,<span class="keyword">int</span> categoryId)</span></span></span><br></pre></td></tr></table></figure><h3><span id="multi-version-control">Multi Version Control</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> goods <span class="keyword">set</span> <span class="keyword">name</span>=<span class="comment">#&#123;newName&#125;,version=#&#123;version&#125; where id=#&#123;id&#125; and version&lt;#&#123;version&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">updateGoodsName</span><span class="params">(<span class="keyword">int</span> id,String newName,<span class="keyword">int</span> version)</span></span></span><br></pre></td></tr></table></figure><h3><span id="status-machine">Status Machine</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">order</span> <span class="keyword">set</span> <span class="keyword">status</span>=<span class="comment">#&#123;status&#125; where id=#&#123;id&#125; and status&lt;#&#123;status&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//such as: status=0,generate;status=1,create error;status=2,complete;</span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">updateOrder</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> status)</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2&gt;&lt;span id=&quot;gloable-id&quot;&gt;Gloable ID&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;If existed, which has been executed. Otherwise, storage ID into database and execut task.
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Mysql" scheme="https://www.robert-liu-designer.tk/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>ML-Algorisum</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/15/ML-Algorisum/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/15/ML-Algorisum/</id>
    <published>2020-04-15T14:09:28.000Z</published>
    <updated>2020-04-16T01:51:50.658Z</updated>
    
    <content type="html"><![CDATA[<div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/ML-AI.jpg"></div><h1><span id="types-of-machine-learning-algorithms">Types of Machine Learning Algorithms</span></h1><p>Supervised Learning Algorithms: 无监督学习<br>    Classification：分类<br>    Regression：回归<br>    Ensembling：集成方法<br>Unsupervised Learning Algorithms：无监督学习<br>    Association：关联<br>    Clustering：聚类<br>    Dimensionality Reduction：维度下降<br>Reinforcement learning：强化学习</p><h2><span id="supervised-learning-algorithms">Supervised Learning Algorithms</span></h2><h3><span id="1linear-regression线性回归">1.Linear Regression线性回归</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Linear-Regression.gif"></div><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> liner_model,datasets</span><br><span class="line"></span><br><span class="line"><span class="comment"># digit dataset frm sklearn</span></span><br><span class="line">digits_data = datasets.load_digits()</span><br><span class="line">linerModel = liner_model.LinerRegression()</span><br><span class="line"></span><br><span class="line"><span class="comment"># define training set</span></span><br><span class="line">x,y = digits_data.data[:<span class="number">-1</span>],digits_data.targets[:<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Train Model</span></span><br><span class="line">linerModel.fit(x_test,y_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Predict</span></span><br><span class="line">y_pred = linerModel.predict([digits_data.data[:<span class="number">-1</span>]])</span><br><span class="line">y_true = digits_data.target[:<span class="number">-1</span>]</span><br></pre></td></tr></table></figure><h3><span id="2logistic-regression逻辑回归">2.Logistic Regression逻辑回归</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Logistic-Regression.png"></div>Sigmoid Function<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Y &#x3D; E^(b0+b1 x)&#x2F;(1 + E^(b0+b1X))</span><br></pre></td></tr></table></figure><h3><span id="3cartclassification-and-regression-tree-implements-of-decision-tree决策树">3.CART(Classification and Regression Tree, implements of Decision Tree)决策树</span></h3><p>Include:<br>Root Nodes：决策节点<br>Interal Nodes：机会节点<br>Leaf Nodes：中节点</p><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Decision-Tree-Diagram.jpg"></div><h3><span id="4naive-bayes朴素贝叶斯">4.Naive Bayes朴素贝叶斯</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Naive-Bayes.png"></div>Bayes's Theorem<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">P(h&#x2F;d)&#x3D;(P(d&#x2F;h)P(h))&#x2F;p(d)</span><br></pre></td></tr></table></figure>NOTE:all the variables are independent of each other,<h3><span id="5knnk-nearest-neighbors-algorithmk-邻近算法">5.KNN(K-Nearest Neighbors algorithm)K-邻近算法</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/KNN.jpg"></div><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import digits</span></span><br><span class="line">digits = datasets.load_digits()</span><br><span class="line">clf = KNeighborsClassifier(n_neighbors=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">x,y = digits.data[:<span class="number">-1</span>],digits.target[:<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Train model</span></span><br><span class="line">clf.train(x,y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Predict</span></span><br><span class="line">y_pred = clf.predict([digits.data[:<span class="number">-1</span>]])</span><br><span class="line">y_ture = digits.target[:<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>## Unsupervised learning algorithms<h3><span id="6apriori关联规则算法">6.Apriori关联规则算法</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Apropri-Rule.png"></div>### 7.K-means K平均算法<div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/k-means-algorithm.png"></div><h3><span id="8pacprincipal-component-analysis主成分析">8.PAC(Principal Component Analysis)主成分析</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/PCA.png"></div><h2><span id="ensemble-learning-techniques集成学习">Ensemble learning techniques集成学习</span></h2><h3><span id="9-bagging-with-random-forests随机森林">9. Bagging with Random Forests随机森林</span></h3><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Random-Forest.png"></div><h3><span id="10boosting-with-adaboostadaboost迭代分类器">10.Boosting with AdaBoost：Adaboost迭代分类器</span></h3><p>Suppport parallel ensemble</p><div align="center"><img src="https://cdn.jsdelivr.net/gh/CN-Robert-LIU/images@master/blog/images/ML/Adaboost.png"></div>]]></content>
    
    <summary type="html">
    
      &lt;!--toc--&gt;
    
    </summary>
    
    
    
      <category term="ML" scheme="https://www.robert-liu-designer.tk/tags/ML/"/>
    
  </entry>
  
  <entry>
    <title>Java-Redis</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/15/Java-Redis/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/15/Java-Redis/</id>
    <published>2020-04-15T02:16:35.000Z</published>
    <updated>2020-04-15T11:52:38.629Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Robert.LIU</span></span><br><span class="line"><span class="comment"> * Rely on spring&amp;redis RedisTemplate Class</span></span><br><span class="line"><span class="comment"> * All Hash method start as h</span></span><br><span class="line"><span class="comment"> * All SET method start as s</span></span><br><span class="line"><span class="comment"> * All List Method start as l</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"redisUtil"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisUtil</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRedisTemplate</span><span class="params">(RedisTemplate&lt;String, Object&gt; redisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//=============================common============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * define expire time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (seconds)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">expire</span><span class="params">(String key,<span class="keyword">long</span> time)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(time&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                redisTemplate.expire(key, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Obtain key expire time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key Not null</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> time(seconds) 0 means always valid</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getExpire</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key,TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * check key wether exist</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true-exits false-miss</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasKey</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * delete cache</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key: one or multi</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">del</span><span class="params">(String ... key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(key!=<span class="keyword">null</span>&amp;&amp;key.length&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key.length==<span class="number">1</span>)&#123;</span><br><span class="line">                redisTemplate.delete(key[<span class="number">0</span>]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                redisTemplate.delete(CollectionUtils.arrayToList(key));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//============================String=============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * common cache obtain</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key==<span class="keyword">null</span>?<span class="keyword">null</span>:redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put common cache</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(String key,Object value)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Common cache put include expire time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (seconds) time should be seted over 0,otherwise the deadline would be unlimited</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(String key,Object value,<span class="keyword">long</span> time)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(time&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Auto Increment</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> delta: increment number(over than 0)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">incr</span><span class="params">(String key, <span class="keyword">long</span> delta)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">if</span>(delta&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"increment coefficient must over than 0"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Auto Decresement</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> delta: decrement number(lower than 0)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">decr</span><span class="params">(String key, <span class="keyword">long</span> delta)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">if</span>(delta&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"coeffient must lower than 0"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//================================Map=================================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashGet</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">hget</span><span class="params">(String key,String item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().get(key, item);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Obtain all hashKey</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> allkeys(Map&lt;Object,Object&gt;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;Object,Object&gt; <span class="title">hmget</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashSet</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> map: multi keys</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hmset</span><span class="params">(String key, Map&lt;String,Object&gt; map)</span></span>&#123;  </span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">         &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashSet:include expire time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> map</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (seconds)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hmset</span><span class="params">(String key, Map&lt;String,Object&gt; map, <span class="keyword">long</span> time)</span></span>&#123;  </span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">if</span>(time&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put data into a hash table,if not exist, set new data into new slate</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hset</span><span class="params">(String key,String item,Object value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put data into hash table, include expired time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (second)  Note:would update hash table time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hset</span><span class="params">(String key,String item,Object value,<span class="keyword">long</span> time)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">if</span>(time&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * drop hash table time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key: Not null</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hdel</span><span class="params">(String key, Object... item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> &#123;key == <span class="keyword">null</span>&#125; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        redisTemplate.opsForHash().delete(key,item);</span><br><span class="line">        &#125; </span><br><span class="line">    </span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * Check hash table exist value</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> key: Not null</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> item: not null</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hHasKey</span><span class="params">(String key, String item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, item);</span><br><span class="line">       &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * hash auto incement</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> by: increment number (over 0)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">hincr</span><span class="params">(String key, String item,<span class="keyword">double</span> by)</span></span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, by);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * hash auto decrement</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> item</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> by: decrement(lower 0)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">hdecr</span><span class="params">(String key, String item,<span class="keyword">double</span> by)</span></span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item,-by);  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//============================set=============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Accordint key to obtain Set values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> null or members</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Object&gt; <span class="title">sGet</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * query value wether exist in set</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true Or false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sHasKey</span><span class="params">(String key,Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().isMember(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put data into set cache </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> values: SET </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> success numbers</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">sSet</span><span class="params">(String key, Object...values)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put set data into cache</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (seconds)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> values: </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> success number</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">sSetAndTime</span><span class="params">(String key,<span class="keyword">long</span> time,Object...values)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            Long count = redisTemplate.opsForSet().add(key, values);</span><br><span class="line">            <span class="keyword">if</span>(time&gt;<span class="number">0</span>) expire(key, time);</span><br><span class="line">                    <span class="keyword">return</span> count;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * obtain set cache length</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> key size,if 0, no keys exist</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">sGetSetSize</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * drop value in values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> values: could be muliti value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> drop numbers</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">setRemove</span><span class="params">(String key, Object ...values)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Long count = redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="comment">//===============================list=================================</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * get list cache content by range</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> start</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end: 0 to -1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Object&gt; <span class="title">lGet</span><span class="params">(String key,<span class="keyword">long</span> start, <span class="keyword">long</span> end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * obtainn list length</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">lGetListSize</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * According index obtain list values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index:  index&gt;=0， 0 table head，1:second element，and so on；index&lt;0，-1，tail,</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">lGetIndex</span><span class="params">(String key,<span class="keyword">long</span> index)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().index(key, index);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Put list into</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">lSet</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put object into cache,hold on expire time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (seconds)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">lSet</span><span class="params">(String key, Object value, <span class="keyword">long</span> time)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">                <span class="keyword">if</span> (time &gt; <span class="number">0</span>) expire(key, time);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put object list into cache</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (seconds)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">lSet</span><span class="params">(String key, List&lt;Object&gt; value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * put list into cache,hold on expire time</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time (second)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">lSet</span><span class="params">(String key, List&lt;Object&gt; value, <span class="keyword">long</span> time)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * update list data from index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">lUpdateIndex</span><span class="params">(String key, <span class="keyword">long</span> index,Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().set(key, index, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Move N-value </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> count Move Number</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Moved Number</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">lRemove</span><span class="params">(String key,<span class="keyword">long</span> count,Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Long remove = redisTemplate.opsForList().remove(key, count, value);</span><br><span class="line">            <span class="keyword">return</span> remove;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="redis-data-type">Redis Data Type</span></h3><p>1.link operation</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Close Connection</span></span><br><span class="line">quit</span><br><span class="line"><span class="comment"># simple password register</span></span><br><span class="line">auth</span><br><span class="line"><span class="comment"># Help Code</span></span><br><span class="line"><span class="built_in">help</span> cmd</span><br></pre></td></tr></table></figure><p>2.persistant</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># syns data to disk</span></span><br><span class="line">    save</span><br><span class="line"><span class="comment"># asyn data to disk</span></span><br><span class="line">    bgsave</span><br><span class="line"><span class="comment"># Return UNIX time stamp last time</span></span><br><span class="line">    lastsave</span><br><span class="line"><span class="comment"># data sync disk and close service</span></span><br><span class="line">    shutdown</span><br></pre></td></tr></table></figure><p>3.remote service control</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># server info and count</span></span><br><span class="line">    info</span><br><span class="line"><span class="comment"># storage request realtime</span></span><br><span class="line">    monitor</span><br><span class="line"><span class="comment"># change copy strategy</span></span><br><span class="line">    slaveof</span><br><span class="line"><span class="comment"># runtime setting redis server</span></span><br><span class="line">    config</span><br></pre></td></tr></table></figure><p>4.operate value</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">exists(key)</span><br><span class="line">del(key)</span><br><span class="line"><span class="comment"># return data type</span></span><br><span class="line"><span class="built_in">type</span>(key)</span><br><span class="line"></span><br><span class="line">keys(pattern)</span><br><span class="line">randomkey</span><br><span class="line">keyrename(oldname,newname)</span><br><span class="line"><span class="comment"># database keys num</span></span><br><span class="line">dbsize</span><br><span class="line"><span class="comment"># key valid time length</span></span><br><span class="line">expire</span><br><span class="line"><span class="comment"># obtain key vacation time</span></span><br><span class="line">ttl</span><br><span class="line"><span class="comment"># query refer index</span></span><br><span class="line">select(index)</span><br><span class="line"><span class="comment"># move key to dbindex</span></span><br><span class="line">move(key,dbindex)</span><br><span class="line"><span class="comment"># delete current database all keys</span></span><br><span class="line">flushdb</span><br><span class="line"><span class="comment"># drop all database keys</span></span><br><span class="line">flushall</span><br></pre></td></tr></table></figure><p>5.operate string</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set(key,value)</span><br><span class="line">get(key)</span><br><span class="line">getset(key,value)</span><br><span class="line"># obatain muti keys result</span><br><span class="line">mget(key1,key2,...,keyN)</span><br><span class="line"># </span><br><span class="line">setnx(key,value)</span><br><span class="line">setex(key,time,value)</span><br><span class="line">mset(key N,value N)</span><br><span class="line"># New set,which all not exist</span><br><span class="line">msetnx(key N, value N)</span><br><span class="line">incr(key)</span><br><span class="line"># Integer</span><br><span class="line">incrby(key,integer)</span><br><span class="line">decr(key)</span><br><span class="line">decrby(key,integer)</span><br><span class="line">append(key,value)</span><br><span class="line">substr(key,start,end)</span><br></pre></td></tr></table></figure><p>6.List</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># tail append</span><br><span class="line">rpush(key,value)</span><br><span class="line"># head append</span><br><span class="line">lpush(key,value)</span><br><span class="line"># key list length</span><br><span class="line">llen(key)</span><br><span class="line">lrange(key,start,end)</span><br><span class="line">lpop(key)</span><br><span class="line">rpop(key)</span><br><span class="line">blpop(key1,key2,...,keyN,timeout)</span><br><span class="line">brpop(key1,key2,...,keyN,timeout)</span><br><span class="line">rpoplpush(srckey, dstkey)</span><br></pre></td></tr></table></figure><p>7.SET</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sadd(key, member)</span><br><span class="line">srem(key, member)</span><br><span class="line">spop(key)</span><br><span class="line">smove(srckey, dstkey, member)</span><br><span class="line">scard(key)</span><br><span class="line">sismember(key, member)</span><br><span class="line">sinter(key1, key2,…key N)</span><br><span class="line">sinterstore(dstkey, (keys))</span><br><span class="line">sunion(key1, (keys))</span><br><span class="line">sunionstore(dstkey, (keys))</span><br><span class="line">sdiff(key1, (keys))</span><br><span class="line">sdiffstore(dstkey, (keys))</span><br><span class="line">smembers(key)</span><br><span class="line">srandmember(key)</span><br></pre></td></tr></table></figure><p>8.Hash</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hset(key, field, value)</span><br><span class="line">hget(key, field)</span><br><span class="line">hmget(key, (fields))</span><br><span class="line">hmset(key, (fields))</span><br><span class="line">hincrby(key, field, integer)</span><br><span class="line">hexists(key, field)</span><br><span class="line">hdel(key, field)</span><br><span class="line">hlen(key)</span><br><span class="line">hkeys(key)</span><br><span class="line">hvals(key)</span><br><span class="line">hgetall(key)</span><br></pre></td></tr></table></figure><p>9.Redis Publish</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PSUBSCRIBE pattern [pattern ...]</span><br><span class="line">PUBSUB subcommand [argument [argument ...]]</span><br><span class="line">PUBLISH channel [argument [argument ...]</span><br><span class="line">PUNSUBSCRIBE [pattern [pattern ...]]</span><br><span class="line">SUBSCRIBE channel [channel ...]</span><br><span class="line">UNSUBSCRIBE [channel [channel ...]]</span><br></pre></td></tr></table></figure><p>10.Redis Transaction</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Cancel Transaction</span><br><span class="line">DISCARD</span><br><span class="line"># Submit All Trans</span><br><span class="line">EXEC</span><br><span class="line"># Mark Trans Start</span><br><span class="line">MULTI</span><br><span class="line"># Cancel Watch Key</span><br><span class="line">UNWATCH</span><br><span class="line"># Monitor KEY</span><br><span class="line">WATCH key [key ...]</span><br></pre></td></tr></table></figure><p>11.Count Keys Num</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">keys *</span><br><span class="line">keys prefix_*</span><br></pre></td></tr></table></figure><p>12.flush database</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flushdb</span><br><span class="line">flushall</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;lin
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Redis" scheme="https://www.robert-liu-designer.tk/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Tensorflow-SaveAndLoadModel</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/13/Tensorflow-SaveAndLoadModel/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/13/Tensorflow-SaveAndLoadModel/</id>
    <published>2020-04-13T14:59:27.000Z</published>
    <updated>2020-04-15T13:01:56.651Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="1save-model">1.Save Model</span></h2><p>file extension description:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Meta Graph(.meta): Variables, Operations,Collections</span><br><span class="line">Checkpoint(.ckpt): Binary file, Include weights,biases,gradients and other variables.</span><br></pre></td></tr></table></figure><p>Python3 operation:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">w1 = tf.Variable(tf.random_normal(shape=[<span class="number">2</span>],normal=<span class="string">'w1'</span>))</span><br><span class="line">w2 = tf.Variable(tf.random_normal(shape=[<span class="number">5</span>],normal=<span class="string">'w2'</span>))</span><br><span class="line"></span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line"><span class="comment"># save model</span></span><br><span class="line">saver.save(sess,<span class="string">"test_model_name"</span>)</span><br><span class="line">print(<span class="string">'test_model_name has been saved!'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Save model file as follow:</span></span><br><span class="line"><span class="comment"># test_model_name.data-0000-of-0001</span></span><br><span class="line"><span class="comment"># test_model_name.index</span></span><br><span class="line"><span class="comment"># test_model_name.meta</span></span><br><span class="line"><span class="comment"># checkpoint</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># After Iteration 2000 times save model</span></span><br><span class="line">saver.save(sess,<span class="string">"test_model_name"</span>,global_step=<span class="number">2000</span>)</span><br><span class="line"><span class="comment">## Save model file as follow</span></span><br><span class="line"><span class="comment"># test_model_name-3000.data-00000-of-00001</span></span><br><span class="line"><span class="comment"># test_model_name-3000.index</span></span><br><span class="line"><span class="comment"># test_model_name-3000.meta</span></span><br><span class="line"><span class="comment"># checkpoint</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If you not want save mete file each iteration,set write_meta_graph sa False</span></span><br><span class="line">saver.save(sess,<span class="string">"test_model_name"</span>,global_step=<span class="number">1000</span>,write_meta_graph=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># If you want to save maximal latest four models in each 2 hours</span></span><br><span class="line">saver = tf.train.saver(max_to_keep=<span class="number">4</span>,keep_checkpoint_every_n_hours=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2><span id="2load-model-which-has-been-trained-completed">2.Load model which has been trained completed</span></h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Generate network model(graph/network)</span></span><br><span class="line">loader = tf.train.import_meta_graph(<span class="string">'test_model_name-1000.meta'</span>)</span><br><span class="line"><span class="comment"># Load Parameter</span></span><br><span class="line"><span class="keyword">with</span> tf.Session <span class="keyword">as</span> sess:</span><br><span class="line">    new_saver = tf.train.import_meta_graph(<span class="string">'test_model_name-1000.meta'</span>)</span><br><span class="line">    <span class="comment"># default check point at py file's same directory</span></span><br><span class="line">    new_saver.restore(sess,tf.train.latest_checkpoint(<span class="string">'./'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Model would be restored. Above statement will print the saved value of w1 variable</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2&gt;&lt;span id=&quot;1save-model&quot;&gt;1.Save Model&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;file extension description:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
      
    
    </summary>
    
    
    
      <category term="ML" scheme="https://www.robert-liu-designer.tk/tags/ML/"/>
    
      <category term="Tool" scheme="https://www.robert-liu-designer.tk/tags/Tool/"/>
    
      <category term="Python" scheme="https://www.robert-liu-designer.tk/tags/Python/"/>
    
      <category term="Tensorflow" scheme="https://www.robert-liu-designer.tk/tags/Tensorflow/"/>
    
  </entry>
  
  <entry>
    <title>Java-JVM</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/11/Java-JVM/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/11/Java-JVM/</id>
    <published>2020-04-11T09:49:10.487Z</published>
    <updated>2020-04-11T09:49:10.487Z</updated>
    
    <content type="html"><![CDATA[<p>JVM Parameter:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-server</span><br><span class="line">-Xms6000M</span><br><span class="line">-Xmx6000M</span><br><span class="line">-Xmn500M</span><br><span class="line">-XX:PermSize&#x3D;500M</span><br><span class="line">-XX:MaxPermSize&#x3D;500M</span><br><span class="line">-XX:SurvivorRatio&#x3D;65536</span><br><span class="line">-XX:MaxTenuringThreshold&#x3D;0</span><br><span class="line">-Xnoclassgc</span><br><span class="line">-XX:+DisableExplicitGC</span><br><span class="line">-XX:+UseParNewGC</span><br><span class="line">-XX:+UseConcMarkSweepGC</span><br><span class="line">-XX:+UseCMSCompactAtFullCollection</span><br><span class="line">-XX:CMSFullGCsBeforeCompaction&#x3D;0</span><br><span class="line">-XX:+CMSClassUnloadingEnabled</span><br><span class="line">-XX:-CMSParallelRemarkEnabled</span><br><span class="line">-XX:CMSInitiatingOccupancyFraction&#x3D;90</span><br><span class="line">-XX:SoftRefLRUPolicyMSPerMB&#x3D;0</span><br><span class="line">-XX:+PrintClassHistogram</span><br><span class="line">-XX:+PrintGCDetails</span><br><span class="line">-XX:+PrintGCTimeStamps</span><br><span class="line">-XX:+PrintHeapAtGC</span><br><span class="line">-Xloggc:log&#x2F;gc.log</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;JVM Parameter:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;lin
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="JVM" scheme="https://www.robert-liu-designer.tk/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>visual-Echarts</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/11/visual-Echarts/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/11/visual-Echarts/</id>
    <published>2020-04-11T09:46:14.353Z</published>
    <updated>2020-04-11T09:46:14.353Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="project-display">Project Display</span></h3><ul><li><a href="/echart/visual-plate/index.html">Visula-Plate-Demo</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;project-display&quot;&gt;Project Display&lt;/span&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;/echart/visual-plate/index.html&quot;&gt;Visula-Plate-Demo&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;
      
    
    </summary>
    
    
    
      <category term="demo" scheme="https://www.robert-liu-designer.tk/tags/demo/"/>
    
      <category term="javacript" scheme="https://www.robert-liu-designer.tk/tags/javacript/"/>
    
  </entry>
  
  <entry>
    <title>Java-Concurrent-Lock</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/10/Java-Concurrent-Lock/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/10/Java-Concurrent-Lock/</id>
    <published>2020-04-09T16:24:30.000Z</published>
    <updated>2020-04-09T16:53:57.149Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#PessimisticLock">PessimisticLock</a></li><li><a href="#OptimisticLock">OptimisticLock</a></li><li><a href="#Simple-Spring-Memcached">Simple-Spring-Memcached</a></li></ul><p><a name="PessimisticLock"></a></p><h3><span id="pessimistic-lock">Pessimistic Lock</span></h3><h4><span id="hibernate-lock-mode">Hibernate Lock Mode：</span></h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">## According Hibernate Lock Mechanism</span><br><span class="line"># Without Lock</span><br><span class="line">LockMode.NONE</span><br><span class="line"></span><br><span class="line"># Insert Or Update auto obtain</span><br><span class="line">LockMode.WRITE</span><br><span class="line"></span><br><span class="line"># Read Record</span><br><span class="line">LockMode.READ</span><br><span class="line"></span><br><span class="line">## Database Inner Lock,Application Layer</span><br><span class="line"># for update</span><br><span class="line">LockMode.UPGRADE</span><br><span class="line"># Oracle Lock Mechanism: for update nowait</span><br><span class="line">LockMode.UPGRADE_NOWAIT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Realize</span><br><span class="line"># Criteria.setLockMode</span><br><span class="line"># Query.setLockMode</span><br><span class="line"># Session.lock</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Note: All Lock Mode Should Set Before Generate SQL Sentence.</span><br></pre></td></tr></table></figure><h4><span id="mysqlpessimistic-locking">Mysql:(Pessimistic Locking)</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--start transaction</span></span><br><span class="line"><span class="keyword">begin</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">account</span> <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">"RobertLIU"</span> <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line"><span class="comment">--If not commit.the table line will be locked</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--The lock be released</span></span><br><span class="line"><span class="comment">--Query OK</span></span><br></pre></td></tr></table></figure><p><a name="OptimisticLock"></a></p><h3><span id="optimistic-lock">Optimistic Lock</span></h3><p>optimistic lock property</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">none: without lock</span><br><span class="line">version: Version Mechanism</span><br><span class="line">dirty: Check Modified Property</span><br><span class="line">all: Check All Property</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Note: Using &#39;version&#39; would be recommend</span><br></pre></td></tr></table></figure><h4><span id="xml-setting">XML Setting</span></h4><p>1.User.hbm.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-mapping</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span> <span class="attr">package</span>=<span class="string">"com.robertliu.test"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"User"</span>  <span class="attr">table</span>=<span class="string">"user"</span> <span class="attr">optimistic-lock</span>=<span class="string">"version"</span> &gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"native"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--version tag must follow behind id --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span> <span class="attr">column</span>=<span class="string">"version"</span> <span class="attr">name</span>=<span class="string">"version"</span>  /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">                 </span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line">     </span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.hibernate.cfg.xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">hibernate-configuration</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Setting database dialect.If use jbpm，Database Dialect must be InnoDB--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dialect"</span>&gt;</span>org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Auto Create Data Table --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Displat Hibernate persist operation SQL sentence --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Format SQL script and export --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format_sql"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"current_session_context_class"</span>&gt;</span>thread<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Import Mapping Setting  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.url"</span>&gt;</span>jdbc:mysql:///user<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.password"</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connection.driver_class"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">"com/xiaohao/test/User.hbm.xml"</span> /&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.UserTest.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaohao.test;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.hibernate.Session;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Transaction;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.Configuration;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Configuration conf=<span class="keyword">new</span> Configuration().configure();</span><br><span class="line">        SessionFactory sf=conf.buildSessionFactory();</span><br><span class="line">        Session session=sf.getCurrentSession();</span><br><span class="line">        <span class="comment">// All action should start transaction if you want to make optimistic lock.</span></span><br><span class="line">        Transaction tx=session.beginTransaction();</span><br><span class="line">        User user=(User) session.get(User<span class="class">.<span class="keyword">class</span>, 1)</span>;</span><br><span class="line">        user.setUserName(<span class="string">"221"</span>);</span><br><span class="line">     </span><br><span class="line">        System.out.println(<span class="string">"恭喜您，用户的数据插入成功了哦~~"</span>);</span><br><span class="line">        tx.commit();</span><br><span class="line">        <span class="comment">// version would be auto increase</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.Realize Concurrent and Sync</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaohao.test;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.hibernate.Session;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Transaction;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.Configuration;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Configuration conf=<span class="keyword">new</span> Configuration().configure();</span><br><span class="line">        SessionFactory sf=conf.buildSessionFactory();</span><br><span class="line">        Session session=sf.openSession();</span><br><span class="line"><span class="comment">//      Session session2=sf.openSession();</span></span><br><span class="line">        Transaction tx=session.beginTransaction();</span><br><span class="line">        User user=(User) session.createQuery(<span class="string">" from User user where user=5"</span>).uniqueResult();</span><br><span class="line">        user.setUserName(<span class="string">"101"</span>);</span><br><span class="line">        tx.commit();</span><br><span class="line">        System.out.println(user.getVersion());</span><br><span class="line">         </span><br><span class="line">        System.out.println(user.getVersion());</span><br><span class="line"><span class="comment">//      User user2=(User) session.createQuery(" from User user where user=5").uniqueResult();</span></span><br><span class="line"><span class="comment">//      System.out.println(user2.getVersion());</span></span><br><span class="line"><span class="comment">//      System.out.println(user.getVersion()==user2.getVersion());</span></span><br><span class="line"><span class="comment">//      Transaction tx2=session2.beginTransaction();</span></span><br><span class="line"><span class="comment">//      user2.setUserName("4468");</span></span><br><span class="line"><span class="comment">//      tx2.commit();</span></span><br><span class="line"><span class="comment">//      System.out.println(user2.getVersion());</span></span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><b>org.hibernate.StaleObjectStateException:</b></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Exception in thread "main" org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect):</span><br></pre></td></tr></table></figure><p><a name="JavaCacheFramework"></a></p><h3><span id="java-opensource-cache-framework">Java OpenSource Cache Framework</span></h3><p>TODO:<br>|NAME|Introduction|<br>|:-:|:-:|<br>|JBossCache/TreeCache||<br>|OSCache||<br>|JCACHE||<br>|Ehcache||<br>|Java Caching System/JCS||<br>|SwarmCache||<br>|ShiftOne||<br>|WhirlyCache||<br>|Jofti||<br>|cache4j||<br>|Open Terracotta|JVM |<br>|sccache||<br>|Shoal||<br>|Simple-Spring-Memcached||</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#PessimisticLock&quot;&gt;PessimisticLock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#OptimisticLock&quot;&gt;OptimisticLock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#Simple-Spri
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Concurrent" scheme="https://www.robert-liu-designer.tk/tags/Concurrent/"/>
    
  </entry>
  
  <entry>
    <title>Java-Concurrent-AsyncToSyncActivity</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/09/Java-Concurrent-AsyncToSync/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/09/Java-Concurrent-AsyncToSync/</id>
    <published>2020-04-09T13:51:44.000Z</published>
    <updated>2020-04-09T16:20:48.270Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="asynctosyncactivity">AsyncToSyncActivity</span></h2><div id="flowchart-0" class="flow-chart"></div><ul><li>AsyncToSyncActivity<ul><li><a href="#CountDownLatch">CountDownLatch</a></li><li><a href="#CyclicBarrier">CyclicBarrier</a></li><li><a href="#FutureTask">FutureTask</a></li><li><a href="#rxjava">rxjava</a></li></ul></li></ul><p><a name="CountDownLatch"></a></p><h3><span id="countdownlatch">CountDownLatch</span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define Runnable</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> delayTime;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomRunnable</span><span class="params">(CountDownLatch countDownLatch, String name, <span class="keyword">int</span> delayTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.delayTime = delayTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Start Execute"</span> + name);</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" "</span> + name);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(delayTime);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        LogUtils.e(TAG, name + <span class="string">"Excute Complete"</span>);</span><br><span class="line">        <span class="keyword">if</span> (countDownLatch != <span class="keyword">null</span>) &#123;</span><br><span class="line">            countDownLatch.countDown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> CountDownLatch countDownLatch</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBtnJavaCountDownLatchClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * After complete excute Task2&amp;Task3，then excute Task1</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     countDownLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">     Runnable Task1 = () -&gt; &#123;</span><br><span class="line">         LogUtils.e(TAG, <span class="string">"Start Excute Task1"</span>);</span><br><span class="line">         ThreadUtils.logCurrThreadName(TAG + <span class="string">" Task1"</span>);</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             countDownLatch.await();</span><br><span class="line">         &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">         LogUtils.e(TAG, <span class="string">"Task1 Complete"</span>);</span><br><span class="line">     &#125;;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// Create Thread Pool</span></span><br><span class="line">     ExecutorService executors = Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">     <span class="comment">// Excute</span></span><br><span class="line">     executors.submit(Task1);</span><br><span class="line">     executors.submit(<span class="keyword">new</span> CustomRunnable(countDownLatch, <span class="string">"Task2"</span>, <span class="number">3</span>));</span><br><span class="line">     executors.submit(<span class="keyword">new</span> CustomRunnable(countDownLatch, <span class="string">"Task3"</span>, <span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">     <span class="comment">// Task Complete, Close ThreadPool</span></span><br><span class="line">     executors.shutdown();</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><a name="CyclicBarrier"></a></p><h3><span id="cyclicbarrier">CyclicBarrier</span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Define CyclicBarrier Common Barrier Point Threads Num</span></span><br><span class="line">Int barThreadsNum = <span class="number">10</span>;</span><br><span class="line">CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(barThreadsNum, () -&gt; &#123;</span><br><span class="line">    LogUtils.e(TAG, <span class="string">"All Task Complete"</span>);</span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">" barrierAction"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">List&lt;Runnable&gt; runnables = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> finalI = i;</span><br><span class="line">    Runnable runnable = () -&gt; &#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Current is "</span> + finalI + <span class="string">"task, start execute"</span>);</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" child task"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(finalI);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Current is "</span> + finalI + <span class="string">"task, finish exceute"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            cyclicBarrier.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BrokenBarrierException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    runnables.add(runnable);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line"><span class="keyword">for</span> (Runnable r : runnables) &#123;</span><br><span class="line">    executorService.submit(r);</span><br><span class="line">&#125;</span><br><span class="line">executorService.shutdown();</span><br></pre></td></tr></table></figure><p><a name="FutureTask"></a></p><h3><span id="futuretask">FutureTask</span></h3><p>Callable:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Child thread process"</span>);</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" Task start"</span>);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            sum += i;</span><br><span class="line">            ThreadUtils.logCurrThreadName(TAG + <span class="string">" Task sum:"</span> + sum);</span><br><span class="line">        &#125;</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" Task end"</span>);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.Callable + Future + ExecutorService</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBtnJavaCallableFutureClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="comment">// Callable + Future + ExecutorService</span></span><br><span class="line">     ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main start"</span>);</span><br><span class="line">     ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">     CustomCallable task = <span class="keyword">new</span> CustomCallable();</span><br><span class="line">     Future&lt;Integer&gt; result = executorService.submit(task);</span><br><span class="line">     executorService.shutdown();</span><br><span class="line"></span><br><span class="line">     ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 111"</span>);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         LogUtils.e(TAG, <span class="string">"task执行结果:"</span> + result.get());</span><br><span class="line">     &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">         ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 222:"</span> + i);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 主线程任务执行完毕"</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>2.Callable + FutureTask + ExecutorService</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBtnJavaCallableFutureTaskClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Callable + FutureTask + ExecutorService</span></span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">"  Main thread start"</span>);</span><br><span class="line">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">    CustomCallable task = <span class="keyword">new</span> CustomCallable();</span><br><span class="line">    <span class="comment">// FutureTask</span></span><br><span class="line">    FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;&gt;(task);</span><br><span class="line">    <span class="comment">// FutureTask Object</span></span><br><span class="line">    executorService.submit(futureTask);</span><br><span class="line">    executorService.shutdown();</span><br><span class="line"></span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 111:0"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"task execute result:"</span> + futureTask.get());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 222:"</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">"  Main Thread Complete"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.Callable + FutureTask + Thread</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Callable + FutureTask + Thread</span></span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main start"</span>);</span><br><span class="line">    CustomCallable task = <span class="keyword">new</span> CustomCallable();</span><br><span class="line">    FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;&gt;(task);</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(futureTask);</span><br><span class="line">    thread.start();</span><br><span class="line"></span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 111:0"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"task execute result:"</span> + futureTask.get());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 222:"</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ThreadUtils.logCurrThreadName(TAG + <span class="string">"  main 主线程任务执行完毕"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="rxjava"></a></p><h3><span id="rxjava">rxjava</span></h3><p>Task:</p><div id="flowchart-1" class="flow-chart"></div><p>1.RegisterReqBean</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterReqBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RegisterReqBean</span><span class="params">(String name, String phone, String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.RegisterRespBen</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterRespBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RegisterReqBean</span><span class="params">(String name, String pwd, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.LoginReqBean  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginReqBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LoginReqBean</span> <span class="params">(String name, String pwd, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.LoginRespBean</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginRespBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LoginRespBean</span><span class="params">(String name, String pwd, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="observable">Observable</span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># Simlate Send Register Request</span><br><span class="line">RegisterReqBean registerReqBean = <span class="keyword">new</span> RegisterReqBean(<span class="string">"Robert-LIU"</span> <span class="string">"13122302312"</span>, <span class="string">"000000"</span>);</span><br><span class="line">Observable registerRequest = Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;RegisterReqBean&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;RegisterReqBean&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Register Request registerReqBean:"</span> + registerReqBean);</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">"Register Request Success"</span>);</span><br><span class="line">        emitter.onNext(registerReqBean);</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Send Register Request"</span>);</span><br><span class="line">        emitter.onComplete();</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Register Request Send SUCCESS"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Simulate Regist Response。Convert RegisterReqBean to RegisterRespBean。</span></span><br><span class="line">Function mockRegisterResp = <span class="keyword">new</span> Function&lt;RegisterReqBean, RegisterRespBean&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RegisterRespBean <span class="title">apply</span><span class="params">(RegisterReqBean registerReqBean)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        RegisterRespBean registerRespBean = <span class="keyword">new</span> RegisterRespBean(registerReqBean.getName(),</span><br><span class="line">                registerReqBean.getPwd(), <span class="string">"Congratuation Register SUCCESS"</span>);</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Register Response registerRespBean:"</span> + registerRespBean);</span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);<span class="comment">// Simutlate Network Delay</span></span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" Resgister Response SUCCESS"</span>);</span><br><span class="line">        <span class="keyword">return</span> registerRespBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Simulate Login Request。Convert RegisterRespBean to LoginReqBean。</span></span><br><span class="line">Function mockLoginReq = <span class="keyword">new</span> Function&lt;RegisterRespBean, LoginReqBean&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LoginReqBean <span class="title">apply</span><span class="params">(RegisterRespBean registerRespBean)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LoginReqBean loginReqBean = <span class="keyword">new</span> LoginReqBean(registerRespBean.getName() + <span class="string">" 我要登陆"</span>, registerRespBean.getPwd());</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"Login Request loginReqBean:"</span> + loginReqBean);</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" Login Request SUCCESS"</span>);</span><br><span class="line">        <span class="keyword">return</span> loginReqBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Simulate Login Response。Convert LoginReqBean to LoginRespBean。</span></span><br><span class="line">Function mockLoginResp = <span class="keyword">new</span> Function&lt;LoginReqBean, LoginRespBean&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LoginRespBean <span class="title">apply</span><span class="params">(LoginReqBean loginReqBean)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LoginRespBean loginRespBean = <span class="keyword">new</span> LoginRespBean(loginReqBean.getName(),</span><br><span class="line">                loginReqBean.getPwd(), <span class="string">"Congraduation Login SUCCESS"</span>);</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"登录响应 loginRespBean:"</span> + loginRespBean);</span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);<span class="comment">// Simulate Network Delay</span></span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" Login Response Success"</span>);</span><br><span class="line">        <span class="keyword">return</span> loginRespBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Simulate accept Login Response Result(Subscribe)</span></span><br><span class="line">Observer&lt;LoginRespBean&gt; resultObserver = <span class="keyword">new</span> Observer&lt;LoginRespBean&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"onSubscribe"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(LoginRespBean loginRespBean)</span> </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"onNext Login SUCCESS, you can enjoy the service.。 loginRespBean:"</span> + loginRespBean);</span><br><span class="line">        ThreadUtils.logCurrThreadName(TAG + <span class="string">" "</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"onError e:"</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LogUtils.e(TAG, <span class="string">"onComplete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Map Operation</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">registerRequest.subscribeOn(Schedulers.io())</span><br><span class="line">                .observeOn(Schedulers.newThread())</span><br><span class="line">                .map(mockRegisterResp)</span><br><span class="line">                .observeOn(Schedulers.io())</span><br><span class="line">                .map(mockLoginReq)</span><br><span class="line">                .observeOn(Schedulers.newThread())</span><br><span class="line">                .map(mockLoginResp)</span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                .subscribe(resultObserver);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBtnJavaRxjavaMergeClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Wating Muti Task Exec Complete</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Observable o1 = Observable.create((ObservableOnSubscribe&lt;String&gt;) e -&gt; &#123;</span><br><span class="line">            ThreadUtils.logCurrThreadName(TAG + <span class="string">" Observable1"</span>);</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">            e.onNext(<span class="string">"First Observable"</span>);</span><br><span class="line">            e.onComplete();</span><br><span class="line">        &#125;).subscribeOn(Schedulers.newThread());</span><br><span class="line"></span><br><span class="line">        Observable o2 = Observable.create((ObservableOnSubscribe&lt;String&gt;) e -&gt; &#123;</span><br><span class="line">            ThreadUtils.logCurrThreadName(TAG + <span class="string">" Observable2"</span>);</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">            e.onNext(<span class="string">"Second Observable"</span>);</span><br><span class="line">            e.onComplete();</span><br><span class="line">        &#125;).subscribeOn(Schedulers.newThread());</span><br><span class="line"></span><br><span class="line">        Observable o3 = Observable.create((ObservableOnSubscribe&lt;String&gt;) e -&gt; &#123;</span><br><span class="line">            ThreadUtils.logCurrThreadName(TAG + <span class="string">" Observable3"</span>);</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            e.onNext(<span class="string">"Third Observable"</span>);</span><br><span class="line">            e.onComplete();</span><br><span class="line">        &#125;).subscribeOn(Schedulers.newThread());</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *  After all obeserved task commit onComplete event，subscriber commit onComplete method.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Observable.merge(o1, o2, o3)</span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                .subscribe(<span class="keyword">new</span> Observer() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</span><br><span class="line">                        LogUtils.e(TAG, <span class="string">"onSubscribe"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">                        LogUtils.e(TAG, <span class="string">"onNext: "</span> + o);</span><br><span class="line">                        ThreadUtils.logCurrThreadName(TAG + <span class="string">" onNext"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">                        LogUtils.e(TAG, <span class="string">"onError"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                        LogUtils.e(TAG, <span class="string">"onComplete"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Async-Actionop1=>operation: Blockop2=>end: Sync-Actionst(right)->op1(right)->op2(right)`</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><textarea id="flowchart-1-code" style="display: none">st=>start: Register Requeste=>end: Login Respondop1=>operation: Register Respondop2=>operation: Login Requestst(right)->op1(right)->op2(right)->e</textarea><textarea id="flowchart-1-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-1-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-1", options);</script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2&gt;&lt;span id=&quot;asynctosyncactivity&quot;&gt;AsyncToSyncActivity&lt;/span&gt;&lt;/h2&gt;&lt;div id=&quot;flowchart-0&quot; class=&quot;flow-chart&quot;&gt;&lt;/div&gt;


&lt;ul&gt;&lt;li&gt;AsyncToSyncActiv
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Concurrent" scheme="https://www.robert-liu-designer.tk/tags/Concurrent/"/>
    
  </entry>
  
  <entry>
    <title>docker-build-deploy</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/09/docker-build-deploy/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/09/docker-build-deploy/</id>
    <published>2020-04-09T04:44:29.000Z</published>
    <updated>2020-04-15T13:34:04.064Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="startDocker">StartDocker</a></li><li><a href="#image">Image</a></li><li><a href="#container">Container</a></li><li><a href="#ignoreF">.dockerignore</a></li><li><a href="#DockFile">Dockerfile</a></li><li><a href="#buildImg">Build Image</a></li></ul><p><a name="startDcoker"></a></p><h3><span id="start-dcoker">Start Dcoker</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##########################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Install</span></span><br><span class="line">sudo apt-get install -y apt-transport-https ca-certificates curl software-properties-common</span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg |sudo apt-key add -</span><br><span class="line">sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"</span><br><span class="line">apt-get install docker-ce</span><br><span class="line"><span class="meta">#</span><span class="bash"> docker-ce-cli containerd.io</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vi /etc/docker/daemon.json</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##########################################</span></span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;storage-driver&quot;</span><br><span class="line">    :</span><br><span class="line">    &quot;devicemapper&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Start Docker Service</span><br><span class="line">sudo service docker start</span><br><span class="line"># enable docker</span><br><span class="line">systemctl enable docker</span><br><span class="line"># Stop Docker Service</span><br><span class="line">sudo service docker stop</span><br><span class="line"># Restart Dcoker</span><br><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure><p><a name="image"></a></p><h3><span id="docker-images">Docker Images</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Note:</span><br><span class="line">&#x2F;var&#x2F;lib&#x2F;docker&#x2F;image</span><br><span class="line"></span><br><span class="line">repositories.js records all image info</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># list images</span><br><span class="line">docker images ls</span><br><span class="line"></span><br><span class="line"># delete images</span><br><span class="line">docker image rm [imagename]</span><br><span class="line"></span><br><span class="line"># pull image</span><br><span class="line">docker pull [imagename]&#x2F;[tag]</span><br><span class="line"></span><br><span class="line"># Search image</span><br><span class="line">docker search [imagename]</span><br></pre></td></tr></table></figure><p><a name="#container"></a></p><h3><span id="docker-container">Docker Container</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container ls</span><br><span class="line">docker container ls -all</span><br><span class="line">docker container rm [container_id]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Note:</span><br><span class="line">&#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers</span><br></pre></td></tr></table></figure><p><a name="ignoreF"></a></p><h3><span id="dockerignore">.dockerignore</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.git</span><br><span class="line">node_modules</span><br><span class="line">npm_debug.log</span><br></pre></td></tr></table></figure><p><a name="DockFile"></a></p><h3><span id="dockerfile">Dockerfile</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> base image and its version</span></span><br><span class="line">FROM ubuntu</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> File Author/Maintainer</span></span><br><span class="line">MAINTAINER Maintainer Robert-LIU</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Copy ./app files to containers /app folder</span></span><br><span class="line">COPY ./app</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Define Work Directory</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Install Nginx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add application repository URL to the default sorces</span></span><br><span class="line"></span><br><span class="line">Run echo "deb http://mirrors.aliyun.com/ubuntu/ xenial main" &gt;&gt; /etc/apt/source.list</span><br><span class="line"><span class="meta">#</span><span class="bash"> Update Repository</span></span><br><span class="line">RUN apt-get update</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Copy a configuration file from the current directory</span></span><br><span class="line">Add xxx.conf /usr/lib/</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################################</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Expose External Port</span></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the default <span class="built_in">command</span> to excute</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> When Creating a new container</span></span><br><span class="line"></span><br><span class="line">CMD service nginx start</span><br></pre></td></tr></table></figure><p><a name="buildImg"></a></p><h3><span id="build-image">Build Image</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Build Docker Image File</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Defalut version as latest</span></span><br><span class="line">docker image build -t Lrobert-liu-demo .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> define version</span></span><br><span class="line">docker image build -t robert-liu-demo:0.0.1 .</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Notes:</span><br><span class="line">...</span><br><span class="line">Successfully built 0223asde22as</span><br><span class="line">Successfully tagged robert-liu-demo:latest</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><a name="publishDocker"></a></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Login Your cloud.docker.com OR hub.docker.com account</span></span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> dcoker image tag [imagename] [username]/[repository]:[tag]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Sample as follow</span></span><br><span class="line">docker image tag robert-liu-demo:0.0.1 robertliu/robert-liu-demo:0.0.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> Or</span></span><br><span class="line">docker image robertliu/robert-liu-demo:0.0.1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Push Image to Remote Repository</span></span><br><span class="line">docker image push [username]/[repository]:[tag]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;startDocker&quot;&gt;StartDocker&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#image&quot;&gt;Image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#container&quot;&gt;Container&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a h
      
    
    </summary>
    
    
    
      <category term="Tools" scheme="https://www.robert-liu-designer.tk/tags/Tools/"/>
    
      <category term="Docker" scheme="https://www.robert-liu-designer.tk/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>mybatis-Introdution</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/08/mybatis/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/08/mybatis/</id>
    <published>2020-04-07T16:00:00.000Z</published>
    <updated>2020-04-09T07:50:30.073Z</updated>
    
    <content type="html"><![CDATA[<div id="aplayer-TQRPEYdp" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-TQRPEYdp"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "她的睫毛",              author: "周杰伦",              url: "http://home.ustc.edu.cn/~mmmwhy/%d6%dc%bd%dc%c2%d7%20-%20%cb%fd%b5%c4%bd%de%c3%ab.mp3",              pic: "http://home.ustc.edu.cn/~mmmwhy/jay.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><h2><span id="1import-dependency-into-pomxml">1.Import dependency into pom.xml</span></h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2><span id="2xml-setting">2.XML Setting</span></h2><ul><li>configuration（配置）<ul><li><a href="#properties">properties（属性）</a></li>        <li><a href="#settings">settings（设置）</a></li><li><a href="#typeAliases">typeAliases（类型别名）</a></li><li><a href="#typeHandlers">typeHandlers（类型处理器）</a></li><li><a href="#objectFactory">objectFactory（对象工厂）</a></li><li><a href="#plugins">plugins（插件）</a></li><li><a href="#environments">environments（环境配置）</a></li><li><a href="#databaseIdProvider">databaseIdProvider（数据库厂商标识）</a></li><li><a href="#mapper">mappers（映射器）</a></li></ul></li></ul><p><a name="properties"></a></p><h3><span id="properties">Properties</span></h3><p>Priority:<br>Method Param Define &gt; resource/url &gt; properties.property</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"org/mybatis/example/config.properties"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"org.apache.ibatis.parsing.PropertyParser.enable-default-value"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span> <span class="comment">&lt;!-- Start Default Value Property --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"org.apache.ibatis.parsing.PropertyParser.default-value-separator"</span> <span class="attr">value</span>=<span class="string">"?:"</span>/&gt;</span> <span class="comment">&lt;!-- modify defalut split character --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;driver&#125;"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;url&#125;"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username:ut_user&#125;"</span>/&gt;</span><span class="comment">&lt;!-- If 'username' undefined, it's property will set as 'ut_suer'in MyBatis over 3.4.2 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a name="settings"></a></p><h3><span id="settings">Settings</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"multipleResultSetsEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"useColumnLabel"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"useGeneratedKeys"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"autoMappingBehavior"</span> <span class="attr">value</span>=<span class="string">"PARTIAL"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"autoMappingUnknownColumnBehavior"</span> <span class="attr">value</span>=<span class="string">"WARNING"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"defaultExecutorType"</span> <span class="attr">value</span>=<span class="string">"SIMPLE"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"defaultStatementTimeout"</span> <span class="attr">value</span>=<span class="string">"25"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"defaultFetchSize"</span> <span class="attr">value</span>=<span class="string">"100"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"safeRowBoundsEnabled"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"localCacheScope"</span> <span class="attr">value</span>=<span class="string">"SESSION"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"jdbcTypeForNull"</span> <span class="attr">value</span>=<span class="string">"OTHER"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadTriggerMethods"</span> <span class="attr">value</span>=<span class="string">"equals,clone,hashCode,toString"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Inject Parameter by SqlSessionFactoryBuilder.build()</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(reader, environment, props);</span><br></pre></td></tr></table></figure><p><a name="typeAliases"></a></p><h3><span id="typealiases">typeAliases</span></h3><p>1.XML</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"pacakageName.ClassName"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.XML + Anotation</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"pacakageName"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> pacakageName</span><br><span class="line"></span><br><span class="line"><span class="meta">@Alias</span>(<span class="string">"author"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="typeHandlers"></a></p><h3><span id="typehandlers">typeHandlers</span></h3><p>1.refrence handler</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-config.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">"org.mybatis.example.ExampleTypeHandler"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.owner define</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-config.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"org.mybatis.example"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Implement the interface org.apache.ibatis.type.TypeHandler or extend the convenience class org.apache.ibatis.type.BaseTypeHandler</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ExampleTypeHandler.java</span></span><br><span class="line"><span class="meta">@MappedJdbcTypes</span>(JdbcType.VARCHAR)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleTypeHandler</span> <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i,</span></span></span><br><span class="line"><span class="function"><span class="params">    String parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    ps.setString(i, parameter);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rs.getString(columnName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getNullableResult</span><span class="params">(ResultSet rs, <span class="keyword">int</span> columnIndex)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rs.getString(columnIndex);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getNullableResult</span><span class="params">(CallableStatement cs, <span class="keyword">int</span> columnIndex)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cs.getString(columnIndex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="objectFactory"></a></p><h3><span id="objectfactory">objectFactory</span></h3><p><a name="plugins"></a></p><h3><span id="plugins">plugins</span></h3><p><a name="environments"></a></p><h3><span id="environments">environments</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"..."</span> <span class="attr">value</span>=<span class="string">"..."</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;driver&#125;"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;url&#125;"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username&#125;"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a name="#databaseIdProvider"></a></p><h3><span id="databaseidprovider">databaseIdProvider</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">"DB_VENDOR"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"SQL Server"</span> <span class="attr">value</span>=<span class="string">"sqlserver"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"DB2"</span> <span class="attr">value</span>=<span class="string">"db2"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"Oracle"</span> <span class="attr">value</span>=<span class="string">"oracle"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a name="mappers"></a></p><h3><span id="mappers">mappers</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 使用相对于类路径的资源引用 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Using classpath relative resources --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/mybatis/builder/AuthorMapper.xml"</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 使用完全限定资源定位符（URL） --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Using url fully qualified paths --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">"file:///var/mappers/BlogMapper.xml"</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Using mapper interface classes --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"org.mybatis.builder.PostMapper"</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 将包内的映射器接口实现全部注册为映射器 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Register all interfaces in a package as mappers --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"org.mybatis.builder"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><h2><span id="mapper-xml-files">Mapper XML Files</span></h2><h3><span id="select">Select</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"selectPerson"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"int"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterMap</span>=<span class="string">"deprecated"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultType</span>=<span class="string">"hashmap"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultMap</span>=<span class="string">"personResultMap"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">useCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">fetchSize</span>=<span class="string">"256"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultSetType</span>=<span class="string">"FORWARD_ONLY"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectPerson"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"hashmap"</span>&gt;</span></span><br><span class="line">  SELECT * FROM PERSON WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="insert">Insert</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"insertAuthor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"domain.blog.Author"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyProperty</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyColumn</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">useGeneratedKeys</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"20"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertAuthor"</span>&gt;</span></span><br><span class="line">  insert into Author (id,username,password,email,bio)</span><br><span class="line">  values (#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertAuthor"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">selectKey</span></span></span><br><span class="line"><span class="tag">    <span class="attr">keyProperty</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">resultType</span>=<span class="string">"int"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">order</span>=<span class="string">"BEFORE"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">statementType</span>=<span class="string">"PREPARED"</span>&gt;</span>  </span><br><span class="line">  insert into Author</span><br><span class="line">    (id, username, password, email,bio, favourite_section)</span><br><span class="line">  values</span><br><span class="line">    (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;, #&#123;email&#125;, #&#123;bio&#125;, #&#123;favouriteSection,jdbcType=VARCHAR&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="update">Update</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"updateAuthor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"domain.blog.Author"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"20"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateAuthor"</span>&gt;</span></span><br><span class="line">  update Author set</span><br><span class="line">    username = #&#123;username&#125;,</span><br><span class="line">    password = #&#123;password&#125;,</span><br><span class="line">    email = #&#123;email&#125;,</span><br><span class="line">    bio = #&#123;bio&#125;</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p> multi-row insert</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertAuthor"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">  insert into Author (username, password, email, bio) values</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">    (#&#123;item.username&#125;, #&#123;item.password&#125;, #&#123;item.email&#125;, #&#123;item.bio&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="delete">Delete</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"deleteAuthor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"domain.blog.Author"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"20"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteAuthor"</span>&gt;</span></span><br><span class="line">  delete from Author where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="sql">SQL</span></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"userColumns"</span>&gt;</span> $&#123;alias&#125;.id,$&#123;alias&#125;.username,$&#123;alias&#125;.password <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUsers"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"userColumns"</span>&gt;</span><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"alias"</span> <span class="attr">value</span>=<span class="string">"t1"</span>/&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span>,</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"userColumns"</span>&gt;</span><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"alias"</span> <span class="attr">value</span>=<span class="string">"t2"</span>/&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">  from some_table t1</span><br><span class="line">    cross join some_table t2</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"sometable"</span>&gt;</span></span><br><span class="line">  $&#123;prefix&#125;Table</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"someinclude"</span>&gt;</span></span><br><span class="line">  from</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"$&#123;include_target&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"select"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    field1, field2, field3</span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"someinclude"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"Some"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"include_target"</span> <span class="attr">value</span>=<span class="string">"sometable"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3><span id="result-maps">Result Maps</span></h3><ul><li><tt>constructor</tt> - used for injecting results into the constructor of a class upon instantiation<ul><li><tt>idArg</tt> - ID argument; flagging results as ID will help improve overall performance</li><li><tt>arg</tt> - a normal result injected into the constructor</li></ul></li>          <li><tt>id</tt> – an ID result; flagging results as ID will help improve overall performance</li>          <li><tt>result</tt> – a normal result injected into a field or JavaBean property</li><li><tt>association</tt> – a complex type association; many results will roll up into this type<ul><li>nested result mappings – associations are <tt>resultMap</tt>s themselves, or can refer to one</li></ul></li><li><tt>collection</tt> – a collection of complex types<ul><li>nested result mappings – collections are <tt>resultMap</tt>s themselves, or can refer to one</li></ul></li><li><tt>discriminator</tt> – uses a result value to determine which <tt>resultMap</tt> to use<ul><li><tt>case</tt> – a case is a result map based on some value            <ul><li>nested result mappings – a case is also a result map itself, and thus can contain many of these same elements, or it can refer to an external resultMap.</li></ul></li></ul></li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- In Config XML file --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.someapp.model.User"</span> <span class="attr">alias</span>=<span class="string">"User"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- In SQL Mapping XML file --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUsers"</span> <span class="attr">resultType</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">  select id, username, hashedPassword</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4><span id="supported-jdbc-types">Supported JDBC Types</span></h4><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">BIT</td><td align="center">FLOAT</td><td align="center">CHAR</td><td align="center">TIMESTAMP</td><td align="center">OTHER</td><td align="center">UNDEFINED</td></tr><tr><td align="center">TINYINT</td><td align="center">REAL</td><td align="center">VARCHAR</td><td align="center">BINARY</td><td align="center">BLOB</td><td align="center">NVARCHAR</td></tr><tr><td align="center">SMALLINT</td><td align="center">DOUBLE</td><td align="center">LONGVARCHAR</td><td align="center">VARBINARY</td><td align="center">CLOB</td><td align="center">NCHAR</td></tr><tr><td align="center">INTEGER</td><td align="center">NUMERIC</td><td align="center">DATE</td><td align="center">LONGVARBINARY</td><td align="center">BOOLEAN</td><td align="center">NCLOB</td></tr><tr><td align="center">BIGINT</td><td align="center">DECIMAL</td><td align="center">TIME</td><td align="center">NULL</td><td align="center">CURSOR</td><td align="center">ARRAY</td></tr></tbody></table><p>Attribute:<br>column, javaType, jdbcType, typeHandler, select, resultMap, name</p><h4><span id="nested-select-for-collection">Nested Select for Collection:</span></h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"blogResult"</span> <span class="attr">type</span>=<span class="string">"Blog"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"posts"</span> <span class="attr">javaType</span>=<span class="string">"ArrayList"</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">ofType</span>=<span class="string">"Post"</span> <span class="attr">select</span>=<span class="string">"selectPostsForBlog"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBlog"</span> <span class="attr">resultMap</span>=<span class="string">"blogResult"</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectPostsForBlog"</span> <span class="attr">resultType</span>=<span class="string">"Post"</span>&gt;</span></span><br><span class="line">  SELECT * FROM POST WHERE BLOG_ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"posts"</span> <span class="attr">javaType</span>=<span class="string">"ArrayList"</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">ofType</span>=<span class="string">"Post"</span> <span class="attr">select</span>=<span class="string">"selectPostsForBlog"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4><span id="multiple-resultsets-for-collection">Multiple ResultSets for Collection</span></h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- result sets define --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBlog"</span> <span class="attr">resultSets</span>=<span class="string">"blogs,posts"</span> <span class="attr">resultMap</span>=<span class="string">"blogResult"</span>&gt;</span></span><br><span class="line">  &#123;call getBlogsAndPosts(#&#123;id,jdbcType=INTEGER,mode=IN&#125;)&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"blogResult"</span> <span class="attr">type</span>=<span class="string">"Blog"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"title"</span> <span class="attr">column</span>=<span class="string">"title"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"posts"</span> <span class="attr">ofType</span>=<span class="string">"Post"</span> <span class="attr">resultSet</span>=<span class="string">"posts"</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">foreignColumn</span>=<span class="string">"blog_id"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"subject"</span> <span class="attr">column</span>=<span class="string">"subject"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"body"</span> <span class="attr">column</span>=<span class="string">"body"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h4><span id="discriminator">Discriminator</span></h4><p>1.result map</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"vehicleResult"</span> <span class="attr">type</span>=<span class="string">"Vehicle"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"vin"</span> <span class="attr">column</span>=<span class="string">"vin"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"year"</span> <span class="attr">column</span>=<span class="string">"year"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"make"</span> <span class="attr">column</span>=<span class="string">"make"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"model"</span> <span class="attr">column</span>=<span class="string">"model"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"color"</span> <span class="attr">column</span>=<span class="string">"color"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">"int"</span> <span class="attr">column</span>=<span class="string">"vehicle_type"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">resultMap</span>=<span class="string">"carResult"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">resultMap</span>=<span class="string">"truckResult"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"3"</span> <span class="attr">resultMap</span>=<span class="string">"vanResult"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"4"</span> <span class="attr">resultMap</span>=<span class="string">"suvResult"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"carResult"</span> <span class="attr">type</span>=<span class="string">"Car"</span> <span class="attr">extends</span>=<span class="string">"vehicleResult"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"doorCount"</span> <span class="attr">column</span>=<span class="string">"door_count"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.direct define</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"vehicleResult"</span> <span class="attr">type</span>=<span class="string">"Vehicle"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"vin"</span> <span class="attr">column</span>=<span class="string">"vin"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"year"</span> <span class="attr">column</span>=<span class="string">"year"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"make"</span> <span class="attr">column</span>=<span class="string">"make"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"model"</span> <span class="attr">column</span>=<span class="string">"model"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"color"</span> <span class="attr">column</span>=<span class="string">"color"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">"int"</span> <span class="attr">column</span>=<span class="string">"vehicle_type"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">resultType</span>=<span class="string">"carResult"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"doorCount"</span> <span class="attr">column</span>=<span class="string">"door_count"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">resultType</span>=<span class="string">"truckResult"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"boxSize"</span> <span class="attr">column</span>=<span class="string">"box_size"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"extendedCab"</span> <span class="attr">column</span>=<span class="string">"extended_cab"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"3"</span> <span class="attr">resultType</span>=<span class="string">"vanResult"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"powerSlidingDoor"</span> <span class="attr">column</span>=<span class="string">"power_sliding_door"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">"4"</span> <span class="attr">resultType</span>=<span class="string">"suvResult"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"allWheelDrive"</span> <span class="attr">column</span>=<span class="string">"all_wheel_drive"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h4><span id="auto-maping">Auto Maping</span></h4><p>Regardless of the auto-mapping level configured you can enable or disable the automapping for an specific ResultMap by adding the attribute <tt>autoMapping<tt> to it:</tt></tt></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBlog"</span> <span class="attr">resultMap</span>=<span class="string">"blogResult"</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    B.id,</span><br><span class="line">    B.title,</span><br><span class="line">    A.username,</span><br><span class="line">  from Blog B left outer join Author A on B.author_id = A.id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Mapping File --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"blogResult"</span> <span class="attr">type</span>=<span class="string">"Blog"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"author"</span> <span class="attr">resultMap</span>=<span class="string">"authorResult"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"authorResult"</span> <span class="attr">type</span>=<span class="string">"Author"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"author_username"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Auto Mapping --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userResultMap"</span> <span class="attr">type</span>=<span class="string">"User"</span> <span class="attr">autoMapping</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"hashed_password"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h4><span id="cache">Cache</span></h4><ul><li><tt>LRU<tt> – Least Recently Used: Removes objects that haven't been used for the longst period of time.</tt></tt></li><li><tt>FIFO<tt> – First In First Out: Removes objects in the order that they entered the cache.</tt></tt></li><li><tt>SOFT<tt> – Soft Reference: Removes objects based on the garbage collector state and the rules of Soft References.</tt></tt></li><li><tt>WEAK<tt> – Weak Reference: More aggressively removes objects based on the garbage collector state and rules of Weak References.</tt></tt></li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag">  <span class="attr">eviction</span>=<span class="string">"FIFO"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushInterval</span>=<span class="string">"60000"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">"512"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">readOnly</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>Interface of cache</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Cache</span> </span>&#123;</span><br><span class="line">  <span class="function">String <span class="title">getId</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">putObject</span><span class="params">(Object key, Object value)</span></span>;</span><br><span class="line">  <span class="function">Object <span class="title">getObject</span><span class="params">(Object key)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">hasKey</span><span class="params">(Object key)</span></span>;</span><br><span class="line">  <span class="function">Object <span class="title">removeObject</span><span class="params">(Object key)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://mybatis.org/images/mybatis-logo.png&quot; alt=&quot;Mybatis-3&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="Java" scheme="https://www.robert-liu-designer.tk/tags/Java/"/>
    
      <category term="Plugins" scheme="https://www.robert-liu-designer.tk/tags/Plugins/"/>
    
      <category term="Mybatis" scheme="https://www.robert-liu-designer.tk/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>git_operation</title>
    <link href="https://www.robert-liu-designer.tk/2020/04/07/git-operation/"/>
    <id>https://www.robert-liu-designer.tk/2020/04/07/git-operation/</id>
    <published>2020-04-07T05:20:20.000Z</published>
    <updated>2020-04-09T08:56:29.585Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="config-git">Config Git</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global user.name Robert LIU</span><br><span class="line">git config --global user.email liujuncz@126.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> define <span class="built_in">alias</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git config --global <span class="built_in">alias</span>.&lt;aliname&gt; &lt;<span class="built_in">command</span>&gt;</span></span><br><span class="line">git config --global alias.lg "log --color --graph ==pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit"</span><br><span class="line">git config --list</span><br><span class="line">git config &lt;key&gt;</span><br></pre></td></tr></table></figure><p>Git Config File :</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;gitconfig</span><br><span class="line">~&#x2F;.gitconfig</span><br><span class="line">~&#x2F;.config&#x2F;git&#x2F;config</span><br><span class="line">.git&#x2F;config</span><br></pre></td></tr></table></figure><ul><li><a href="#A_0">Initialize Reposition</a></li><li><a href="#B_0">Add new, modified or deleted files</a></li><li><a href="#C_0">Display Status</a></li><li><a href="#E_0">Initialize Reposition</a></li><li><a href="#F_0">Move files</a></li><li><a href="#G_0">Diff file</a></li><li><a href="#H_0">History Log</a></li><li><a href="#I_0">Undo or Modify</a></li><li><a href="#J_0">Remote Repo</a></li><li><a href="#K_0">Add Tags</a></li><li><a href="#L_0">Undo or Modify</a></li><li><a href="#M_0">Storage Or Clean</a></li><li><a href="#N_0">Git Search</a></li><li><a href="#O_0">Git Undo</a></li><li><a href="#P_0">Git Roll Back</a></li><li><a href="#Q_0">Git Delete Submit</a></li></ul><p><a name="A_0"></a></p><h2><span id="a-initialize-reposition">A. Initialize Reposition</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. init</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.clone a copy as demo</span></span><br><span class="line">git clone https://github.com/LiusStarSpace/OnlineEducation_Python.git</span><br><span class="line"><span class="meta">#</span><span class="bash"> format as: git <span class="built_in">clone</span> [url] [pathName]</span></span><br></pre></td></tr></table></figure><p><a name="B_0"></a></p><h2><span id="b-add-new-modified-or-deleted-files">B. Add new, modified or deleted files</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. modified or deleted files</span></span><br><span class="line">git add -u</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. new or modified files</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. all</span></span><br><span class="line">git add -A</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. Temp file to store</span></span><br><span class="line">git add &lt;file1&gt; &lt;file2&gt; &lt;file3&gt;</span><br></pre></td></tr></table></figure><p><a name="C_0"></a></p><h2><span id="c-display-status">C. Display Status</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. all info</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. short info</span></span><br><span class="line">git status -s</span><br></pre></td></tr></table></figure><p><a name="D_0"></a></p><h2><span id="d-commit-files">D. Commit files</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. Add comment by using -m paramer</span></span><br><span class="line">git commit -m &lt;commit log&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. directly submit</span></span><br><span class="line">git commit -a -m &lt;commit log&gt;</span><br></pre></td></tr></table></figure><p><a name="E_0"></a></p><h2><span id="e-remove-files">E. Remove files</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. force remove tracked file</span></span><br><span class="line">git rm -f &lt;fileName&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. remove temporary file</span></span><br><span class="line">git rm --cached &lt;fileName&gt;</span><br></pre></td></tr></table></figure><p><a name="F_0"></a></p><h2><span id="f-move-files">F. Move files</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. rename file</span></span><br><span class="line">git mv &lt;fileName1&gt; &lt;fileName2&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. move file to folder</span></span><br><span class="line">git mv &lt;fileName&gt; test/</span><br></pre></td></tr></table></figure><p><a name="G_0"></a></p><h2><span id="g-diff-file">G. Diff file</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. compare <span class="built_in">local</span> and remote</span></span><br><span class="line">git diff --cache</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. diff specific file</span></span><br><span class="line">git diff &lt;fileName&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. diff commit version </span></span><br><span class="line">git diff &lt;commitId_1&gt; &lt;commitId_2&gt; [path]</span><br></pre></td></tr></table></figure><p><a name="H_0"></a></p><h2><span id="h-history-log">H. History Log</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git log [&lt;options&gt;] [&lt;since&gt;..&lt;until&gt;] [[--] &lt;path&gt;...]</span><br><span class="line"><span class="meta">#</span><span class="bash"> Browse <span class="built_in">history</span> commit</span></span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p: display commit diff</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">stat</span>: count commit <span class="built_in">history</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --pretty: display format, include: oneline, short, medium, full, fuller, email, format...</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --graph: display as ASCII graph to show commit or merge <span class="built_in">history</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -n: recent commit n lines info </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --author: specifi author</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --grep: include key words commit</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --since/--after</span></span><br><span class="line">git log --graph --pretty=oneline --abbrev-commit</span><br></pre></td></tr></table></figure><p><a name="I_0"></a></p><h2><span id="i-undo-or-modify">I. Undo or Modify</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Undo</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> recover temp repo, <span class="built_in">local</span> repo and workdir repo to pre version</span></span><br><span class="line">git reset --hard HEAD~</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> recover temp repo, <span class="built_in">local</span> repo exclude wordir to pre version</span></span><br><span class="line">git reset --mixed HEAD~</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> recover <span class="built_in">local</span> repo exclude temp repo and wordir to pre vetsion</span></span><br><span class="line">git reset --soft HEAD~</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> reset workdir modified file</span></span><br><span class="line">git checkout --&lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Override pre submit</span></span><br><span class="line">git commit --amend -m "apend commit +1"</span><br></pre></td></tr></table></figure><p><a name="J_0"></a></p><h2><span id="j-remote-repo">J. Remote Repo</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone &lt;url&gt;</span><br><span class="line">git remote</span><br><span class="line">git remote -v</span><br><span class="line">git remote show [remote-name]</span><br><span class="line">git remote rename [old name] [new name]</span><br><span class="line">git remote add &lt;shortname&gt; &lt;url&gt;</span><br><span class="line">git remote rm [remote-name]</span><br><span class="line">git fetch [remote name]# update local data</span><br><span class="line">git pull [remote-name] [branch-name]</span><br><span class="line">git push [remote-name] [branch-name]</span><br><span class="line">git push [remote-name] --delete [branch-name]</span><br></pre></td></tr></table></figure><p><a name="K_0"></a></p><h2><span id="k-add-tags">K. Add Tags</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git tag &lt;tagname&gt;</span><br><span class="line">git tag -a &lt;tagname&gt; &lt;commit id&gt;</span><br><span class="line">git push origin &lt;tagname&gt;</span><br><span class="line">git push origin --tag</span><br><span class="line">git checkout -b [branchname] [tagname]</span><br><span class="line">git push origin :refs/tags/&lt;tagname&gt;</span><br></pre></td></tr></table></figure><p><a name="L_0"></a></p><h2><span id="l-branch">L. Branch</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch</span><br><span class="line">git branch -v</span><br><span class="line">git show-branch</span><br><span class="line">git branch &lt;branchname&gt;</span><br><span class="line">git checkout &lt;branchname&gt;</span><br><span class="line">git checkout -b &lt;branchname&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> fast forward</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git merge &lt;branchname&gt;</span></span><br><span class="line">git merge --no-ff -m "merge with no-ff"</span><br><span class="line"></span><br><span class="line">git branch --merge</span><br><span class="line">git branch --nomerged</span><br><span class="line">git branch -d &lt;branchname&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> git branch -D &lt;branchname&gt;</span></span><br><span class="line">git push origin --delete serverfix</span><br><span class="line">git checkout -m &lt;branchname&gt;</span><br><span class="line">git checkout -b branch-name origin/branch-name</span><br></pre></td></tr></table></figure><p><a name="M_0"></a></p><h2><span id="m-storage-or-clean">M. Storage Or Clean</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Storage file</span></span><br><span class="line">git stash list</span><br><span class="line">git stash apply</span><br><span class="line">git stash apply stash@&#123;&lt;num&gt;&#125;</span><br><span class="line">git stash drop stash@&#123;&lt;num&gt;&#125;</span><br><span class="line">git stash pop</span><br><span class="line">git stash branch &lt;branchname&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Clear File</span></span><br><span class="line">git clean -i</span><br><span class="line">git clean -d -n</span><br><span class="line"><span class="meta">#</span><span class="bash"> git clean</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git clean -d -f</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git clean -d -x</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git stash --all</span></span><br></pre></td></tr></table></figure><p><a name="N_0"></a></p><h2><span id="n-git-search">N. Git Search</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git greb &lt;tag&gt;</span><br><span class="line">git greb -n &lt;tag&gt;</span><br><span class="line">git greb --count &lt;tag&gt;</span><br><span class="line">git grep -p &lt;tag&gt; [fileExtension]</span><br><span class="line">git log -S[tag]</span><br><span class="line">git log -L</span><br></pre></td></tr></table></figure><p><a name="O_0"></a></p><h2><span id="o-git-undo">O. Git Undo</span></h2><p>1.work tree undo</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git  checkout .</span><br></pre></td></tr></table></figure><p>2.submit partial</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git status</span><br><span class="line">git reset HEAD &lt;filename&gt;</span><br></pre></td></tr></table></figure><p>3.reset modified</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git reset HEAD filename</span><br><span class="line">git checkout filename</span><br></pre></td></tr></table></figure><p>4.update commit mark</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add filename</span><br><span class="line">git commit --amend -m"update modifed"</span><br></pre></td></tr></table></figure><p><a name="P_0"></a></p><h2><span id="p-git-roll-back">P. Git Roll Back</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git checkout &lt;tag&gt;</span><br><span class="line">git checkout &lt;branchname&gt;</span><br></pre></td></tr></table></figure><p>1.undo to specific version</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git log &lt;filename&gt;</span><br><span class="line">git checkout &lt;commitID&gt; &lt;filename&gt;</span><br></pre></td></tr></table></figure><p>2.delete latest commit</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> REVERT</span></span><br><span class="line">git revert HEAD</span><br><span class="line">git push origin master</span><br><span class="line"><span class="meta">#</span><span class="bash"> RESET</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line">git push origin master</span><br><span class="line"><span class="meta">#</span><span class="bash"> roll back</span></span><br><span class="line">git log</span><br><span class="line">git revert &lt;commitID&gt;</span><br></pre></td></tr></table></figure><p><a name="Q_0"></a></p><h2><span id="q-git-delete-submit">Q. Git Delete Submit</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git log --oneline -n5</span><br><span class="line"><span class="meta">#</span><span class="bash"> Former commit version</span></span><br><span class="line">git rebase -i "commitID"</span><br><span class="line">git push origin master -f</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2&gt;&lt;span id=&quot;config-git&quot;&gt;Config Git&lt;/span&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git conf
      
    
    </summary>
    
    
    
      <category term="Tools" scheme="https://www.robert-liu-designer.tk/tags/Tools/"/>
    
      <category term="Git" scheme="https://www.robert-liu-designer.tk/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://www.robert-liu-designer.tk/2020/03/06/hello-world/"/>
    <id>https://www.robert-liu-designer.tk/2020/03/06/hello-world/</id>
    <published>2020-03-06T05:29:13.000Z</published>
    <updated>2020-04-22T12:36:04.478Z</updated>
    
    <content type="html"><![CDATA[<div align="center"><p style="color:#3fb573;fontsize:4em">Celebrating my first blog and the websited has been built!</p></div><div align="center"><p style="color:#3fb573;fontsize:4em">Conratuation!</p></div>]]></content>
    
    <summary type="html">
    
      &lt;!--

Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).

## Quick Start

### Create a new post

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/one-command-deployment.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;–&amp;gt;&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="demo" scheme="https://www.robert-liu-designer.tk/tags/demo/"/>
    
  </entry>
  
</feed>
